const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/js/Index-D9-jOo4a.js","assets/js/react-vendor-CnY34O61.js","assets/js/vendor-CwuJVHC1.js","assets/js/backend-vendor-CggdsxVJ.js","assets/js/ui-vendor-CttiZxwU.js","assets/styles/react-vendor-Bbgo5x5y.css","assets/js/Dashboard-BUEqOdhC.js","assets/js/Layout-BPnBhQSp.js","assets/js/utils-vendor-BkyaMd0J.js","assets/js/progress-DpWD15xE.js","assets/js/query-vendor-DEKS82BJ.js","assets/js/Discover-DBT7Sfjp.js","assets/js/input-DGNBd0ih.js","assets/js/select-Cwmdi1fL.js","assets/js/categories-niEc3ryh.js","assets/js/matchingEngine-Bob_s50X.js","assets/js/DiscoverTinder-DQISRdQE.js","assets/js/textarea-Db-_GloC.js","assets/js/Trades-CJELvpM_.js","assets/js/tabs-aRayiNj8.js","assets/js/Services-CrT36HGF.js","assets/js/timeCredits-C7U4qTHB.js","assets/js/Profile-DZ5cp7Sc.js","assets/js/label-PSg-V1BV.js","assets/styles/Profile-BV-uvf5k.css","assets/js/Settings-CFk0qYcy.js","assets/js/TradeDetails-BQ9khC9D.js","assets/js/TradeProposals-Ck4G34Hk.js","assets/js/CreditWallet-DZT-zZS1.js","assets/js/NotFound-DV7b0W2o.js","assets/js/AuthPage-CG3JwWHa.js","assets/js/AuthCallback-CCfgaTEc.js","assets/js/OnboardingPage-B4n-SApV.js","assets/js/AnalyticsPage-BIYaEQmJ.js"])))=>i.map(i=>d[i]);
var e=Object.defineProperty,t=Object.defineProperties,s=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,n=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,a=Math.pow,o=(t,s,r)=>s in t?e(t,s,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[s]=r,l=(e,t)=>{for(var s in t||(t={}))n.call(t,s)&&o(e,s,t[s]);if(r)for(var s of r(t))i.call(t,s)&&o(e,s,t[s]);return e},c=(e,r)=>t(e,s(r)),d=(e,t)=>{var s={};for(var a in e)n.call(e,a)&&t.indexOf(a)<0&&(s[a]=e[a]);if(null!=e&&r)for(var a of r(e))t.indexOf(a)<0&&i.call(e,a)&&(s[a]=e[a]);return s},u=(e,t,s)=>o(e,"symbol"!=typeof t?t+"":t,s),m=(e,t,s)=>new Promise((r,n)=>{var i=e=>{try{o(s.next(e))}catch(t){n(t)}},a=e=>{try{o(s.throw(e))}catch(t){n(t)}},o=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,a);o((s=s.apply(e,t)).next())});import{r as h,j as f,C as p,P as g,V as v,e as y,f as x,h as w,X as _,T as b,D as j,i as N,k as E,u as k,N as S,S as T,l as O,L as I,Z as C,B as A,M as D,m as P,H as q,U as R,n as M,o as L,R as z,p as B,q as V,w as U,s as Q,t as F,Q as Y,v as J,x as G,y as K}from"./react-vendor-CnY34O61.js";import{ah as X,ai as W,aj as $,ak as H,al as Z}from"./vendor-CwuJVHC1.js";import{c as ee,a as te}from"./utils-vendor-BkyaMd0J.js";import{c as se,p as re}from"./query-vendor-DEKS82BJ.js";import{c as ne}from"./backend-vendor-CggdsxVJ.js";import"./ui-vendor-CttiZxwU.js";!function(){const e=document.createElement("link").relList;if(!(e&&e.supports&&e.supports("modulepreload"))){for(const e of document.querySelectorAll('link[rel="modulepreload"]'))t(e);new MutationObserver(e=>{for(const s of e)if("childList"===s.type)for(const e of s.addedNodes)"LINK"===e.tagName&&"modulepreload"===e.rel&&t(e)}).observe(document,{childList:!0,subtree:!0})}function t(e){if(e.ep)return;e.ep=!0;const t=function(e){const t={};return e.integrity&&(t.integrity=e.integrity),e.referrerPolicy&&(t.referrerPolicy=e.referrerPolicy),"use-credentials"===e.crossOrigin?t.credentials="include":"anonymous"===e.crossOrigin?t.credentials="omit":t.credentials="same-origin",t}(e);fetch(e.href,t)}}();const ie=class e{constructor(){u(this,"isEnabled"),u(this,"gaTrackingId"),u(this,"userId",null),this.isEnabled=!1,this.gaTrackingId="",this.isEnabled&&this.gaTrackingId&&this.initializeGoogleAnalytics()}static getInstance(){return e.instance||(e.instance=new e),e.instance}initializeGoogleAnalytics(){const e=document.createElement("script");e.async=!0,e.src=`https://www.googletagmanager.com/gtag/js?id=${this.gaTrackingId}`,document.head.appendChild(e),window.dataLayer=window.dataLayer||[],window.gtag=function(...e){window.dataLayer.push(e)},window.gtag("js",new Date),window.gtag("config",this.gaTrackingId,{country:"NG",currency:"NGN",custom_map:{custom_dimension_1:"user_location",custom_dimension_2:"business_category",custom_dimension_3:"trust_score_level"}})}setUser(e){var t;this.userId=e.id,this.isEnabled&&(null==(t=window.gtag)||t.call(window,"config",this.gaTrackingId,{user_id:e.id,custom_dimension_1:e.location||"unknown",custom_dimension_2:e.category||"unknown",custom_dimension_3:e.trustScore&&e.trustScore>70?"high":e.trustScore&&e.trustScore>40?"medium":"low"}))}trackPageView(e,t){var s;this.isEnabled&&(null==(s=window.gtag)||s.call(window,"event","page_view",{page_title:t||e,page_location:window.location.href,page_path:e,custom_dimension_1:this.getCurrentLocation()}))}trackBusinessEvent(e,t={}){var s;if(!this.isEnabled)return;const r=l({event_category:"nigerian_business",event_label:t.category,value:t.value,currency:t.currency||"NGN",custom_dimension_1:t.location||this.getCurrentLocation()},t);null==(s=window.gtag)||s.call(window,"event",e,r)}trackTrade(e,t){this.trackBusinessEvent(`trade_${e}`,{trade_id:t.tradeId,proposer_category:t.proposerCategory,provider_category:t.providerCategory,proposer_location:t.proposerLocation,provider_location:t.providerLocation,value:t.estimatedValue,duration:t.duration})}trackService(e,t){this.trackBusinessEvent(`service_${e}`,{service_id:t.serviceId,category:t.category,location:t.location,value:t.hourlyRate})}trackEngagement(e,t={}){var s;this.isEnabled&&(null==(s=window.gtag)||s.call(window,"event",e,l({event_category:"user_engagement",user_id:this.userId},t)))}trackPerformance(e,t,s="ms"){var r;this.isEnabled&&(null==(r=window.gtag)||r.call(window,"event","timing_complete",{name:e,value:Math.round(t),event_category:"performance",custom_dimension_1:this.getCurrentLocation()}))}trackError(e,t="unknown"){var s;this.isEnabled&&(null==(s=window.gtag)||s.call(window,"event","exception",{description:e,fatal:!1,custom_dimension_1:t}))}trackMarketInsight(e,t){this.trackBusinessEvent("market_insight",l({insight_type:e},t))}getCurrentLocation(){return"Lagos"}};u(ie,"instance");let ae=ie;class oe{static startMeasurement(e){this.measurements.set(e,performance.now())}static endMeasurement(e){const t=this.measurements.get(e);if(!t)return 0;const s=performance.now()-t;return this.measurements.delete(e),le.trackPerformance(e,s),s}static measureAsync(e,t){return new Promise((s,r)=>m(this,null,function*(){this.startMeasurement(e);try{const r=yield t();this.endMeasurement(e),s(r)}catch(n){this.endMeasurement(e),r(n)}}))}static initWebVitals(){if("undefined"==typeof window)return;new PerformanceObserver(e=>{for(const t of e.getEntries())"first-contentful-paint"===t.name&&le.trackPerformance("FCP",t.startTime)}).observe({entryTypes:["paint"]}),new PerformanceObserver(e=>{const t=e.getEntries(),s=t[t.length-1];le.trackPerformance("LCP",s.startTime)}).observe({entryTypes:["largest-contentful-paint"]});let e=0;new PerformanceObserver(t=>{for(const s of t.getEntries())s.hadRecentInput||(e+=s.value);le.trackPerformance("CLS",1e3*e)}).observe({entryTypes:["layout-shift"]})}}u(oe,"measurements",new Map);const le=ae.getInstance();"undefined"!=typeof window&&oe.initWebVitals();const ce=class e{constructor(){u(this,"isOnline",navigator.onLine),u(this,"queue",[]),u(this,"QUEUE_KEY","timebank-offline-queue"),u(this,"MAX_RETRIES",3),u(this,"RETRY_DELAY",2e3),u(this,"queryClient",null),this.loadQueue(),this.setupEventListeners()}static getInstance(){return e.instance||(e.instance=new e),e.instance}setQueryClient(e){this.queryClient=e}setupEventListeners(){window.addEventListener("online",this.handleOnline.bind(this)),window.addEventListener("offline",this.handleOffline.bind(this)),document.addEventListener("visibilitychange",this.handleVisibilityChange.bind(this)),setInterval(()=>{this.isOnline&&this.queue.length>0&&this.processQueue()},1e4)}handleOnline(){this.isOnline=!0,le.trackBusinessEvent("connection_restored",{queue_size:this.queue.length,connection_type:this.getConnectionType()}),this.processQueue(),this.refreshCriticalData()}handleOffline(){this.isOnline=!1,le.trackBusinessEvent("connection_lost",{queue_size:this.queue.length,last_sync:Date.now()}),this.enableOfflineMode()}handleVisibilityChange(){"visible"===document.visibilityState&&this.isOnline&&this.processQueue()}queueOperation(e){const t=c(l({},e),{id:crypto.randomUUID(),timestamp:Date.now(),retries:0});this.queue.push(t),this.saveQueue(),this.isOnline&&this.processQueue()}processQueue(){return m(this,null,function*(){if(0===this.queue.length)return;const e=this.queue.sort((e,t)=>{const s={high:3,medium:2,low:1};return s[e.priority]!==s[t.priority]?s[t.priority]-s[e.priority]:e.timestamp-t.timestamp}),t=[];for(const r of e)try{yield this.executeOperation(r),t.push(r.id),le.trackBusinessEvent("offline_sync_success",{operation_type:r.type,resource:r.resource,retry_count:r.retries,queue_time:Date.now()-r.timestamp})}catch(s){r.retries++,r.retries>=this.MAX_RETRIES&&(t.push(r.id),le.trackBusinessEvent("offline_sync_failed",{operation_type:r.type,resource:r.resource,retry_count:r.retries,error:s.message})),yield new Promise(e=>setTimeout(e,this.RETRY_DELAY*Math.pow(2,r.retries)))}this.queue=this.queue.filter(e=>!t.includes(e.id)),this.saveQueue()})}executeOperation(e){return m(this,null,function*(){switch(e.resource){case"profile":return this.syncProfile(e);case"trade":return this.syncTrade(e);case"service":return this.syncService(e);case"proposal":return this.syncProposal(e);default:throw new Error(`Unknown resource: ${e.resource}`)}})}syncProfile(e){return m(this,null,function*(){yield this.simulateNetworkDelay(),this.queryClient&&this.queryClient.setQueryData(["profile",e.data.id],e.data)})}syncTrade(e){return m(this,null,function*(){yield this.simulateNetworkDelay(),this.queryClient&&this.queryClient.invalidateQueries({queryKey:["trades"]})})}syncService(e){return m(this,null,function*(){yield this.simulateNetworkDelay(),this.queryClient&&this.queryClient.invalidateQueries({queryKey:["services"]})})}syncProposal(e){return m(this,null,function*(){yield this.simulateNetworkDelay(),this.queryClient&&this.queryClient.invalidateQueries({queryKey:["proposals"]})})}simulateNetworkDelay(){return m(this,null,function*(){const e=3e3*Math.random()+1e3;return new Promise(t=>setTimeout(t,e))})}loadQueue(){try{const e=localStorage.getItem(this.QUEUE_KEY);e&&(this.queue=JSON.parse(e))}catch(e){this.queue=[]}}saveQueue(){try{localStorage.setItem(this.QUEUE_KEY,JSON.stringify(this.queue))}catch(e){}}enableOfflineMode(){this.queryClient&&(this.queryClient.getDefaultOptions().queries=c(l({},this.queryClient.getDefaultOptions().queries),{networkMode:"offlineFirst",staleTime:1/0,gcTime:864e5})),this.showOfflineNotification()}refreshCriticalData(){if(!this.queryClient)return;["profile","active-trades","notifications","credit-balance"].forEach(e=>{var t;null==(t=this.queryClient)||t.invalidateQueries({queryKey:[e]})})}showOfflineNotification(){}getConnectionType(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e&&e.effectiveType||"unknown"}isOffline(){return!this.isOnline}getQueueSize(){return this.queue.length}clearQueue(){this.queue=[],this.saveQueue()}optimizeForDataSaving(){this.queryClient&&(this.queryClient.getDefaultOptions().queries=c(l({},this.queryClient.getDefaultOptions().queries),{refetchOnWindowFocus:!1,refetchOnMount:!1,refetchOnReconnect:!0}))}enableDataSaverMode(e){e&&this.optimizeForDataSaving()}};u(ce,"instance");const de=ce.getInstance(),ue=e=>{const t=e instanceof Error?e.message:"Unknown error";!t.includes("Network request failed")&&t.includes("fetch")},me={users:["users"],user:e=>[...me.users,e],userProfile:e=>[...me.user(e),"profile"],userServices:e=>[...me.user(e),"services"],userTrades:e=>[...me.user(e),"trades"],userTransactions:e=>[...me.user(e),"transactions"],services:["services"],service:e=>[...me.services,e],servicesByCategory:e=>[...me.services,"category",e],servicesByLocation:e=>[...me.services,"location",e],popularServices:()=>[...me.services,"popular"],trades:["trades"],trade:e=>[...me.trades,e],tradeMessages:e=>[...me.trade(e),"messages"],activeTradesByUser:e=>[...me.trades,"active",e],tradeHistory:e=>[...me.trades,"history",e],nigerianRates:["nigerian-rates"],nigerianBanks:["nigerian-banks"],nigerianHolidays:["nigerian-holidays"],locationPricing:(e,t)=>["location-pricing",e,t],analytics:["analytics"],userAnalytics:e=>[...me.analytics,e],marketAnalytics:()=>[...me.analytics,"market"],notifications:e=>["notifications",e],systemStatus:["system-status"]},he=(e,t)=>m(void 0,null,function*(){const s=[e.prefetchQuery({queryKey:me.userProfile(t),staleTime:6e5}),e.prefetchQuery({queryKey:me.userServices(t),staleTime:3e5}),e.prefetchQuery({queryKey:me.activeTradesByUser(t),staleTime:12e4})];yield Promise.allSettled(s)}),fe=e=>m(void 0,null,function*(){const t=[e.prefetchQuery({queryKey:me.popularServices(),staleTime:9e5}),e.prefetchQuery({queryKey:me.nigerianRates,staleTime:36e5})];yield Promise.allSettled(t)});function pe(...e){return W(ee(e))}const ge=g;h.forwardRef((e,t)=>{var s=e,{className:r,sideOffset:n=4}=s,i=d(s,["className","sideOffset"]);return f.jsx(p,l({ref:t,sideOffset:n,className:pe("z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r)},i))}).displayName=p.displayName;let ve=0;const ye=new Map,xe=e=>{if(ye.has(e))return;const t=setTimeout(()=>{ye.delete(e),je({type:"REMOVE_TOAST",toastId:e})},1e6);ye.set(e,t)},we=(e,t)=>{switch(t.type){case"ADD_TOAST":return c(l({},e),{toasts:[t.toast,...e.toasts].slice(0,1)});case"UPDATE_TOAST":return c(l({},e),{toasts:e.toasts.map(e=>e.id===t.toast.id?l(l({},e),t.toast):e)});case"DISMISS_TOAST":{const{toastId:s}=t;return s?xe(s):e.toasts.forEach(e=>{xe(e.id)}),c(l({},e),{toasts:e.toasts.map(e=>e.id===s||void 0===s?c(l({},e),{open:!1}):e)})}case"REMOVE_TOAST":return void 0===t.toastId?c(l({},e),{toasts:[]}):c(l({},e),{toasts:e.toasts.filter(e=>e.id!==t.toastId)})}},_e=[];let be={toasts:[]};function je(e){be=we(be,e),_e.forEach(e=>{e(be)})}function Ne(e){var t=d(e,[]);const s=(ve=(ve+1)%Number.MAX_SAFE_INTEGER,ve.toString()),r=()=>je({type:"DISMISS_TOAST",toastId:s});return je({type:"ADD_TOAST",toast:c(l({},t),{id:s,open:!0,onOpenChange:e=>{e||r()}})}),{id:s,dismiss:r,update:e=>je({type:"UPDATE_TOAST",toast:c(l({},e),{id:s})})}}function Ee(){const[e,t]=h.useState(be);return h.useEffect(()=>(_e.push(t),()=>{const e=_e.indexOf(t);e>-1&&_e.splice(e,1)}),[e]),c(l({},e),{toast:Ne,dismiss:e=>je({type:"DISMISS_TOAST",toastId:e})})}const ke=N,Se=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx(v,l({ref:t,className:pe("fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]",r)},n))});Se.displayName=v.displayName;const Te=te("group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full",{variants:{variant:{default:"border bg-background text-foreground",destructive:"destructive group border-destructive bg-destructive text-destructive-foreground"}},defaultVariants:{variant:"default"}}),Oe=h.forwardRef((e,t)=>{var s=e,{className:r,variant:n}=s,i=d(s,["className","variant"]);return f.jsx(y,l({ref:t,className:pe(Te({variant:n}),r)},i))});Oe.displayName=y.displayName;h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx(x,l({ref:t,className:pe("inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive",r)},n))}).displayName=x.displayName;const Ie=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx(w,c(l({ref:t,className:pe("absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600",r),"toast-close":""},n),{children:f.jsx(_,{className:"h-4 w-4"})}))});Ie.displayName=w.displayName;const Ce=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx(b,l({ref:t,className:pe("text-sm font-semibold",r)},n))});Ce.displayName=b.displayName;const Ae=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx(j,l({ref:t,className:pe("text-sm opacity-90",r)},n))});function De(){const{toasts:e}=Ee();return f.jsxs(ke,{children:[e.map(function(e){var t=e,{id:s,title:r,description:n,action:i}=t,a=d(t,["id","title","description","action"]);return f.jsxs(Oe,c(l({},a),{children:[f.jsxs("div",{className:"grid gap-1",children:[r&&f.jsx(Ce,{children:r}),n&&f.jsx(Ae,{children:n})]}),i,f.jsx(Ie,{})]}),s)}),f.jsx(Se,{})]})}Ae.displayName=j.displayName;const Pe=e=>{var t=d(e,[]);const{theme:s="system"}=$();return f.jsx(H,l({theme:s,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}}},t))},qe={BASE_URL:"/timebankngx/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ENVIRONMENT:"production",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhqdGtocW10dXBlc2FpeXJrYnJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTcwNDIsImV4cCI6MjA3MDE5MzA0Mn0.e9I-BX-5D_D0XkNts-DY0a83JQrirrG3G-6B0kAxN3I",VITE_SUPABASE_URL:"https://hjtkhqmtupesaiyrkbrr.supabase.co"},Re=(e,t)=>{const s=qe[e]||t;if(!s)throw new Error(`Environment variable ${e} is required but not set`);return s},Me=Re("VITE_SUPABASE_URL"),Le=Re("VITE_SUPABASE_ANON_KEY");if(!Me.startsWith("https://")&&!Me.startsWith("http://"))throw new Error("VITE_SUPABASE_URL must be a valid URL starting with https:// or http://");const ze=ne(Me,Le,{auth:{storage:localStorage,persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,flowType:"pkce"},global:{headers:{"x-application":"timebank-ng","x-environment":"production"}}}),Be=se()(re((e,t)=>({session:null,user:null,profile:null,isAuthenticated:!1,isOnboarded:!1,dismissedEmailReminder:!1,notifications:[],isLoading:!1,services:[],trades:[],setAuth:(s,r)=>{var n;const i=null==(n=t().user)?void 0:n.id,a=!r||void 0!==i&&(null==r?void 0:r.id)!==i;e(l({session:s,user:r,isAuthenticated:!!s&&!!r},a?{trades:[],services:[],notifications:[]}:{}))},setProfile:t=>{e({profile:t,isOnboarded:(null==t?void 0:t.is_onboarded)||!1})},signUp:t=>m(void 0,[t],function*({email:t,password:s,displayName:r,category:n,location:i,needs:a,phone:o}){try{e({isLoading:!0});const l=`${window.location.origin}/auth/callback`,c={};r&&(c.display_name=r),n&&(c.primary_category=n),i&&(c.location=i),o&&(c.phone=o),a&&a.length>0&&(c.needs=a);const{error:d}=yield ze.auth.signUp({email:t,password:s,options:{emailRedirectTo:l,data:c}});return d?{error:d.message}:{}}catch(l){return{error:"An unexpected error occurred"}}finally{e({isLoading:!1})}}),signIn:(t,s)=>m(void 0,null,function*(){try{e({isLoading:!0});const{error:r}=yield ze.auth.signInWithPassword({email:t,password:s});return r?{error:r.message}:{}}catch(r){return{error:"An unexpected error occurred"}}finally{e({isLoading:!1})}}),signOut:()=>m(void 0,null,function*(){try{yield ze.auth.signOut(),e({session:null,user:null,profile:null,isAuthenticated:!1,isOnboarded:!1,notifications:[],trades:[],services:[],dismissedEmailReminder:!1})}catch(t){}}),dismissEmailReminder:t=>e({dismissedEmailReminder:t}),resetEmailReminder:()=>e({dismissedEmailReminder:!1}),updateProfile:s=>m(void 0,null,function*(){try{const{user:r}=t();if(!r)return{error:"Not authenticated"};const{error:n}=yield ze.from("profiles").update(s).eq("id",r.id);if(n)return{error:n.message};const i=t().profile;if(i){const t=l(l({},i),s);"phone_verified"in s&&(t.phone_verified=s.phone_verified,s.phone_verified&&(t.verification_phone=!0)),"needs"in s&&(t.needs=s.needs),e({profile:t})}return{}}catch(r){return{error:"Failed to update profile"}}}),completeOnboarding:()=>m(void 0,null,function*(){return yield t().updateProfile({is_onboarded:!0})}),addNotification:s=>e({notifications:[{id:crypto.randomUUID(),text:s,time:new Date},...t().notifications].slice(0,20)}),fetchServices:()=>m(void 0,null,function*(){try{const{data:t}=yield ze.from("services").select("*");e({services:t||[]})}catch(t){}}),fetchTrades:()=>m(void 0,null,function*(){try{const{user:s}=t();if(!s)return;const{data:r}=yield ze.from("trades").select("\n          *,\n          service_requested:service_requested_id(*),\n          service_offered:service_offered_id(*)\n        ").or(`proposer_id.eq.${s.id},provider_id.eq.${s.id}`);e({trades:r||[]})}catch(s){}}),addService:e=>m(void 0,null,function*(){var s,r,n,i,a,o,l,c,d,u,m,h;try{const{user:f}=t();if(!f)return{error:"Not authenticated"};const p={user_id:f.id,title:e.title,description:e.description,category:e.category,base_hourly_rate:null!=(s=e.baseHourlyRate)?s:0,credits_per_hour:null!=(n=null!=(r=e.creditsPerHour)?r:e.baseHourlyRate)?n:0,minimum_hours:null!=(i=e.minimum_hours)?i:1,maximum_hours:null!=(o=e.maximum_hours)?o:Math.max(null!=(a=e.minimum_hours)?a:1,8),skill_level:null!=(l=e.skillLevel)?l:"Intermediate",is_available:null==(c=e.is_available)||c,serves_remote:null==(d=e.serves_remote)||d,serves_onsite:null!=(u=e.serves_onsite)&&u,tags:null!=(m=e.tags)?m:[],portfolio_images:null!=(h=e.portfolio_images)?h:[]},{error:g}=yield ze.from("services").insert(p);return g?{error:g.message}:(t().fetchServices(),{})}catch(f){return{error:"Failed to add service"}}}),addTradeMessage:(e,s)=>m(void 0,null,function*(){try{const{user:r}=t();if(!r)return{error:"Not authenticated"};const{error:n}=yield ze.from("trade_messages").insert({trade_id:e,sender_id:r.id,text:s.text});return n?{error:n.message}:(t().fetchTrades(),{})}catch(r){return{error:"Failed to send message"}}})}),{name:"timebank-store"})),Ve=()=>{const{session:e,user:t,profile:s,isAuthenticated:r,isOnboarded:n,setAuth:i,setProfile:a}=Be();return h.useEffect(()=>{const{data:{subscription:e}}=ze.auth.onAuthStateChange((e,t)=>{var s;i(t,null!=(s=null==t?void 0:t.user)?s:null),(null==t?void 0:t.user)&&"SIGNED_IN"===e?setTimeout(()=>m(void 0,null,function*(){const{data:e}=yield ze.from("profiles").select("*").eq("id",t.user.id).single();a(e)}),0):"SIGNED_OUT"===e&&a(null)});return ze.auth.getSession().then(({data:{session:e}})=>{(null==e?void 0:e.user)&&(i(e,e.user),setTimeout(()=>m(void 0,null,function*(){const{data:t}=yield ze.from("profiles").select("*").eq("id",e.user.id).single();a(t)}),0))}),()=>e.unsubscribe()},[i,a]),{session:e,user:t,profile:s,isAuthenticated:r,isOnboarded:n}};function Ue(e){var t=e,{className:s}=t,r=d(t,["className"]);return f.jsx("div",l({className:pe("animate-pulse rounded-md bg-muted",s)},r))}const Qe=()=>f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsx("div",{className:"border-b bg-background/95 backdrop-blur",children:f.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between",children:[f.jsxs("div",{className:"flex items-center gap-2",children:[f.jsx(E,{className:"h-6 w-6 text-primary animate-pulse"}),f.jsx("span",{className:"font-brand text-xl",children:"TimeBank"})]}),f.jsx(Ue,{className:"h-8 w-8 rounded-full"})]})}),f.jsxs("div",{className:"container mx-auto px-4 py-6 space-y-6",children:[f.jsxs("div",{className:"text-center space-y-2",children:[f.jsx(Ue,{className:"h-8 w-64 mx-auto"}),f.jsx(Ue,{className:"h-4 w-96 mx-auto"})]}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[f.jsx(Ue,{className:"h-32 w-full"}),f.jsx(Ue,{className:"h-32 w-full"}),f.jsx(Ue,{className:"h-32 w-full"})]}),f.jsxs("div",{className:"space-y-4",children:[f.jsx(Ue,{className:"h-64 w-full"}),f.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[f.jsx(Ue,{className:"h-48 w-full"}),f.jsx(Ue,{className:"h-48 w-full"})]})]})]})]}),Fe=({children:e,requireOnboarding:t=!1})=>{const{isAuthenticated:s,isOnboarded:r,profile:n}=Ve(),i=k();return void 0===n?f.jsxs("div",{className:"min-h-screen p-6 space-y-4",children:[f.jsx(Ue,{className:"h-16 w-full"}),f.jsx(Ue,{className:"h-64 w-full"}),f.jsx(Ue,{className:"h-32 w-full"})]}):s?t&&!r&&"/onboarding"!==i.pathname?f.jsx(S,{to:"/onboarding",replace:!0}):f.jsx(f.Fragment,{children:e}):f.jsx(S,{to:"/auth",state:{from:i},replace:!0})},Ye={BASE_URL:"/timebankngx/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_ENVIRONMENT:"production",VITE_SUPABASE_ANON_KEY:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6ImhqdGtocW10dXBlc2FpeXJrYnJyIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTQ2MTcwNDIsImV4cCI6MjA3MDE5MzA0Mn0.e9I-BX-5D_D0XkNts-DY0a83JQrirrG3G-6B0kAxN3I",VITE_SUPABASE_URL:"https://hjtkhqmtupesaiyrkbrr.supabase.co"},Je=()=>{const e=(()=>{const[e,t]=h.useState({isMobile:!1,isTablet:!1,isDesktop:!0,screenSize:{width:0,height:0},orientation:"portrait",touchSupport:!1,devicePixelRatio:1}),s=h.useCallback(()=>{const e=window.innerWidth,s=window.innerHeight,r=e<768;t({isMobile:r,isTablet:e>=768&&e<1024,isDesktop:e>=1024,screenSize:{width:e,height:s},orientation:e>s?"landscape":"portrait",touchSupport:"ontouchstart"in window,devicePixelRatio:window.devicePixelRatio||1}),r&&le.trackBusinessEvent("mobile_usage",{screen_width:e,screen_height:s,orientation:e>s?"landscape":"portrait",device_pixel_ratio:window.devicePixelRatio||1,user_agent:navigator.userAgent})},[]);return h.useEffect(()=>(s(),window.addEventListener("resize",s),window.addEventListener("orientationchange",s),()=>{window.removeEventListener("resize",s),window.removeEventListener("orientationchange",s)}),[s]),e})(),[t,s]=h.useState({dataSaverMode:!1,reducedAnimations:!1,highContrast:!1,largerText:!1});return h.useEffect(()=>{var t,r,n,i,a,o;const d={dataSaver:window.matchMedia("(prefers-reduced-data: reduce)"),reducedMotion:window.matchMedia("(prefers-reduced-motion: reduce)"),highContrast:window.matchMedia("(prefers-contrast: high)"),slowConnection:"slow-2g"===(null==(t=navigator.connection)?void 0:t.effectiveType)||"2g"===(null==(r=navigator.connection)?void 0:r.effectiveType)};s({dataSaverMode:d.dataSaver.matches||d.slowConnection,reducedAnimations:d.reducedMotion.matches,highContrast:d.highContrast.matches,largerText:e.screenSize.width<380});const u=()=>{s(e=>c(l({},e),{dataSaverMode:d.dataSaver.matches}))},m=()=>{s(e=>c(l({},e),{reducedAnimations:d.reducedMotion.matches}))};return null==(i=(n=d.dataSaver).addListener)||i.call(n,u),null==(o=(a=d.reducedMotion).addListener)||o.call(a,m),()=>{var e,t,s,r;null==(t=(e=d.dataSaver).removeListener)||t.call(e,u),null==(r=(s=d.reducedMotion).removeListener)||r.call(s,m)}},[e.screenSize.width]),c(l(l({},e),t),{isNigerianMobileUser:e.isMobile&&t.dataSaverMode})},Ge=te("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),Ke=h.forwardRef((e,t)=>{var s=e,{className:r,variant:n,size:i,asChild:a=!1}=s,o=d(s,["className","variant","size","asChild"]);const c=a?T:"button";return f.jsx(c,l({className:pe(Ge({variant:n,size:i,className:r})),ref:t},o))});Ke.displayName="Button";const Xe=te("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function We(e){var t=e,{className:s,variant:r}=t,n=d(t,["className","variant"]);return f.jsx("div",l({className:pe(Xe({variant:r}),s)},n))}function $e(){const e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;return e&&e.effectiveType||"unknown"}const He=()=>{const{isOffline:e,queueSize:t}=(()=>{const e=O(),[t,s]=h.useState({isOffline:de.isOffline(),queueSize:de.getQueueSize(),isProcessing:!1,lastSyncTime:null,connectionType:"unknown"}),r=h.useCallback(()=>{s(e=>c(l({},e),{isOffline:de.isOffline(),queueSize:de.getQueueSize(),connectionType:$e()}))},[]);h.useEffect(()=>{de.setQueryClient(e),r();const t=()=>{r(),s(e=>c(l({},e),{lastSyncTime:new Date})),le.trackBusinessEvent("connection_restored",{queue_size:de.getQueueSize()})},n=()=>{r(),le.trackBusinessEvent("connection_lost",{queue_size:de.getQueueSize()})};window.addEventListener("online",t),window.addEventListener("offline",n);const i=setInterval(r,5e3);return()=>{window.removeEventListener("online",t),window.removeEventListener("offline",n),clearInterval(i)}},[e,r]);const n=h.useCallback((e,t,s,n="medium")=>{de.queueOperation({type:e,resource:t,data:s,priority:n}),r()},[r]),i=h.useCallback(()=>{de.clearQueue(),r()},[r]),a=h.useCallback(e=>{de.enableDataSaverMode(e),le.trackBusinessEvent("data_saver_toggled",{enabled:e})},[]);return c(l({},t),{queueOperation:n,clearQueue:i,enableDataSaver:a,refresh:r})})(),[s,r]=h.useState(!1);h.useEffect(()=>{r(!!(e&&t>0))},[e,t]);return{showNotification:s,dismissNotification:h.useCallback(()=>{r(!1)},[]),isOffline:e,queueSize:t,message:e?`You're offline. ${t} changes will sync when connected.`:t>0?`Syncing ${t} changes...`:"All changes synced"}},Ze=()=>{const{showNotification:e,message:t,isOffline:s}=He();return h.useEffect(()=>{s?Ne({variant:"destructive",title:"You're offline",description:"Changes will be saved locally and synced when you reconnect",duration:5e3}):e&&!s&&Ne({title:"Back online!",description:"Your changes are now being synced",duration:3e3})},[s,e]),null},et=[{path:"/dashboard",label:"Home",icon:f.jsx(q,{className:"h-5 w-5"})},{path:"/discover",label:"Discover",icon:f.jsx(P,{className:"h-5 w-5"})},{path:"/trades",label:"Trades",icon:f.jsx(A,{className:"h-5 w-5"}),badge:2},{path:"/services",label:"Services",icon:f.jsx(D,{className:"h-5 w-5"})},{path:"/profile",label:"Profile",icon:f.jsx(R,{className:"h-5 w-5"})}],tt=()=>{const e=k(),{isMobile:t,dataSaverMode:s}=Je();return t?f.jsx("nav",{className:"fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-50",children:f.jsx("div",{className:"grid grid-cols-5 gap-1 px-2 py-1",children:et.map(t=>{const r=e.pathname===t.path;return f.jsxs(I,{to:t.path,className:`\n                flex flex-col items-center justify-center py-2 px-1 rounded-lg\n                transition-colors duration-200 min-h-[60px]\n                ${r?"text-primary bg-primary/10":"text-gray-600 hover:text-primary hover:bg-gray-50"}\n                ${s?"transition-none":""}\n              `,children:[f.jsxs("div",{className:"relative",children:[t.icon,t.badge&&t.badge>0&&f.jsx(We,{className:"absolute -top-2 -right-2 h-4 w-4 p-0 text-xs",variant:"destructive",children:t.badge})]}),f.jsx("span",{className:"text-xs mt-1 text-center font-medium",children:t.label})]},t.path)})})}):null},st=()=>{const[e,t]=h.useState(!1),{isMobile:s,dataSaverMode:r}=Je();return s?f.jsxs(f.Fragment,{children:[f.jsx(Ke,{className:`\n          fixed bottom-20 right-4 h-14 w-14 rounded-full shadow-lg\n          bg-primary hover:bg-primary/90 z-30\n          ${r?"transition-none":"transition-all duration-300"}\n        `,onClick:()=>t(!e),children:e?f.jsx(_,{className:"h-6 w-6"}):f.jsx(C,{className:"h-6 w-6"})}),e&&f.jsx("div",{className:"fixed bottom-32 right-4 z-30",children:f.jsxs("div",{className:"flex flex-col gap-2",children:[f.jsx(Ke,{size:"sm",className:"h-12 w-12 rounded-full bg-green-600 hover:bg-green-700",onClick:()=>t(!1),children:f.jsx(A,{className:"h-5 w-5"})}),f.jsx(Ke,{size:"sm",className:"h-12 w-12 rounded-full bg-blue-600 hover:bg-blue-700",onClick:()=>t(!1),children:f.jsx(D,{className:"h-5 w-5"})}),f.jsx(Ke,{size:"sm",className:"h-12 w-12 rounded-full bg-purple-600 hover:bg-purple-700",onClick:()=>t(!1),children:f.jsx(P,{className:"h-5 w-5"})})]})})]}):null},rt=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx("div",l({ref:t,className:pe("rounded-lg border bg-card text-card-foreground shadow-sm",r)},n))});rt.displayName="Card";const nt=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx("div",l({ref:t,className:pe("flex flex-col space-y-1.5 p-6",r)},n))});nt.displayName="CardHeader";const it=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx("h3",l({ref:t,className:pe("text-2xl font-semibold leading-none tracking-tight",r)},n))});it.displayName="CardTitle";const at=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx("p",l({ref:t,className:pe("text-sm text-muted-foreground",r)},n))});at.displayName="CardDescription";const ot=h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx("div",l({ref:t,className:pe("p-6 pt-0",r)},n))});ot.displayName="CardContent";h.forwardRef((e,t)=>{var s=e,{className:r}=s,n=d(s,["className"]);return f.jsx("div",l({ref:t,className:pe("flex items-center p-6 pt-0",r)},n))}).displayName="CardFooter";const lt=()=>{const{canInstall:e,installPWA:t,showInstallBanner:s}=(()=>{const[e,t]=h.useState(null),[s,r]=h.useState(!1),[n,i]=h.useState(!1);return h.useEffect(()=>{r(window.matchMedia("(display-mode: standalone)").matches);const e=e=>{e.preventDefault(),t(e),i(!0),le.trackBusinessEvent("pwa_install_prompt_shown",{user_agent:navigator.userAgent,timestamp:Date.now()})};return window.addEventListener("beforeinstallprompt",e),()=>{window.removeEventListener("beforeinstallprompt",e)}},[]),{canInstall:n,isInstalled:s,installPWA:()=>m(void 0,null,function*(){if(!e)return!1;try{const s=yield e.prompt(),n=yield s.userChoice;if(le.trackBusinessEvent("pwa_install_attempt",{user_choice:n,outcome:"accepted"===n?"success":"declined"}),"accepted"===n)return r(!0),i(!1),t(null),!0}catch(s){le.trackBusinessEvent("pwa_install_error",{error:s.message})}return!1}),showInstallBanner:n&&!s}})(),[r,n]=h.useState(!1),[i,a]=h.useState(!1);h.useEffect(()=>{const e="true"===localStorage.getItem("pwa-banner-dismissed");n(e);const t=setTimeout(()=>{a(!0)},5e3);return()=>clearTimeout(t)},[]);return s&&i&&!r?f.jsxs(rt,{className:"fixed bottom-20 left-4 right-4 z-40 p-4 bg-gradient-to-r from-green-50 to-blue-50 border-green-200",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx("div",{className:"flex-shrink-0 mt-1",children:f.jsx("div",{className:"h-10 w-10 bg-green-600 rounded-lg flex items-center justify-center",children:f.jsx(M,{className:"h-6 w-6 text-white"})})}),f.jsxs("div",{className:"flex-1 min-w-0",children:[f.jsx("h3",{className:"font-semibold text-green-900 mb-1",children:"🇳🇬 Install Nigerian TimeBank"}),f.jsx("p",{className:"text-sm text-green-700 mb-3 leading-relaxed",children:"Add to your home screen for faster access, offline support, and data-saving features perfect for Nigerian internet conditions."}),f.jsxs("div",{className:"flex gap-2",children:[f.jsxs(Ke,{onClick:()=>m(void 0,null,function*(){(yield t())&&a(!1)}),size:"sm",className:"bg-green-600 hover:bg-green-700 text-white",children:[f.jsx(L,{className:"h-4 w-4 mr-1"}),"Install App"]}),f.jsxs(Ke,{onClick:()=>{a(!1),n(!0),localStorage.setItem("pwa-banner-dismissed","true")},variant:"ghost",size:"sm",className:"text-green-600 hover:text-green-800",children:[f.jsx(_,{className:"h-4 w-4 mr-1"}),"Not Now"]})]})]})]}),f.jsx("div",{className:"mt-3 pt-3 border-t border-green-200",children:f.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-green-600",children:[f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Works offline"]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Saves data"]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Faster loading"]}),f.jsxs("div",{className:"flex items-center gap-1",children:[f.jsx("span",{className:"w-2 h-2 bg-green-400 rounded-full"}),"Less battery usage"]})]})})]}):null};class ct extends z.Component{constructor(e){super(e),u(this,"retryTimeoutId",null),u(this,"handleRetry",()=>{var e;const{retryCount:t}=this.state;t>=3||(this.setState({hasError:!1,error:null,errorInfo:null,retryCount:t+1}),le.trackBusinessEvent("error_recovery_attempt",{retry_count:t+1,error_message:(null==(e=this.state.error)?void 0:e.message)||"unknown"}))}),u(this,"handleGoHome",()=>{var e;le.trackBusinessEvent("error_recovery_home",{retry_count:this.state.retryCount,error_message:(null==(e=this.state.error)?void 0:e.message)||"unknown"}),window.location.href="/"}),u(this,"handleReload",()=>{var e;le.trackBusinessEvent("error_recovery_reload",{retry_count:this.state.retryCount,error_message:(null==(e=this.state.error)?void 0:e.message)||"unknown"}),window.location.reload()}),this.state={hasError:!1,error:null,errorInfo:null,retryCount:0}}static getDerivedStateFromError(e){return{hasError:!0,error:e}}componentDidCatch(e,t){var s,r;this.setState({error:e,errorInfo:t}),le.trackBusinessEvent("application_error",{error_message:e.message,error_stack:null==(s=e.stack)?void 0:s.slice(0,500),component_stack:null==(r=t.componentStack)?void 0:r.slice(0,500),retry_count:this.state.retryCount,user_agent:navigator.userAgent,timestamp:Date.now()})}render(){if(this.state.hasError){if(this.props.fallback){const e=this.props.fallback;return f.jsx(e,l({},this.state))}return f.jsx(dt,c(l({},this.state),{onRetry:this.handleRetry,onGoHome:this.handleGoHome,onReload:this.handleReload}))}return this.props.children}}const dt=({error:e,retryCount:t,onRetry:s,onGoHome:r,onReload:n})=>{const i=t<3;return f.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center p-4",children:f.jsxs(rt,{className:"max-w-lg w-full p-6 text-center",children:[f.jsx("div",{className:"flex justify-center mb-4",children:f.jsx("div",{className:"h-16 w-16 bg-red-100 rounded-full flex items-center justify-center",children:f.jsx(B,{className:"h-8 w-8 text-red-600"})})}),f.jsx("h1",{className:"text-2xl font-semibold text-gray-900 mb-2",children:"Something went wrong"}),f.jsx("p",{className:"text-gray-600 mb-6",children:"Nigerian TimeBank encountered an error. Don't worry, your data is safe and we're working to fix this issue."}),!1,f.jsxs("div",{className:"space-y-3",children:[i&&f.jsxs(Ke,{onClick:s,className:"w-full",size:"lg",children:[f.jsx(V,{className:"h-4 w-4 mr-2"}),"Try Again (",3-t," attempts left)"]}),f.jsxs(Ke,{onClick:r,variant:"outline",className:"w-full",size:"lg",children:[f.jsx(q,{className:"h-4 w-4 mr-2"}),"Go to Dashboard"]}),f.jsxs(Ke,{onClick:n,variant:"ghost",className:"w-full",size:"lg",children:[f.jsx(V,{className:"h-4 w-4 mr-2"}),"Reload Page"]})]}),f.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[f.jsx("h3",{className:"font-medium text-blue-900 mb-2",children:"🇳🇬 Nigerian Support Tips"}),f.jsxs("ul",{className:"text-sm text-blue-700 space-y-1 text-left",children:[f.jsx("li",{children:"• Check your internet connection"}),f.jsx("li",{children:"• Try refreshing if you have slow network"}),f.jsx("li",{children:"• Clear your browser cache if issues persist"}),f.jsx("li",{children:"• Contact support for help"})]})]}),!i&&f.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:f.jsx("p",{className:"text-sm text-yellow-800",children:"Too many retry attempts. Please reload the page or go back to the dashboard."})})]})})},ut=h.lazy(()=>Z(()=>import("./Index-D9-jOo4a.js"),__vite__mapDeps([0,1,2,3,4,5]))),mt=h.lazy(()=>Z(()=>import("./Dashboard-BUEqOdhC.js"),__vite__mapDeps([6,1,2,3,4,5,7,8,9,10]))),ht=h.lazy(()=>Z(()=>import("./Discover-DBT7Sfjp.js"),__vite__mapDeps([11,1,2,3,4,5,7,8,12,13,14,15,10]))),ft=h.lazy(()=>Z(()=>import("./DiscoverTinder-DQISRdQE.js"),__vite__mapDeps([16,1,2,3,4,5,7,8,15,14,9,17,10]))),pt=h.lazy(()=>Z(()=>import("./Trades-CJELvpM_.js"),__vite__mapDeps([18,1,2,3,4,5,7,8,19,10]))),gt=h.lazy(()=>Z(()=>import("./Services-CrT36HGF.js"),__vite__mapDeps([20,1,2,3,4,5,7,8,12,17,13,14,21,10]))),vt=h.lazy(()=>Z(()=>import("./Profile-DZ5cp7Sc.js"),__vite__mapDeps([22,1,2,3,4,5,7,8,23,17,9,12,10,24]))),yt=h.lazy(()=>Z(()=>import("./Settings-CFk0qYcy.js"),__vite__mapDeps([25,1,2,3,4,5,7,8,10]))),xt=h.lazy(()=>Z(()=>import("./TradeDetails-BQ9khC9D.js"),__vite__mapDeps([26,1,2,3,4,5,7,8,17,9,12,23,19,10]))),wt=h.lazy(()=>Z(()=>import("./TradeProposals-Ck4G34Hk.js"),__vite__mapDeps([27,1,2,3,4,5,7,8,19,17,12,21,15,10]))),_t=h.lazy(()=>Z(()=>import("./CreditWallet-DZT-zZS1.js"),__vite__mapDeps([28,1,2,3,4,5,7,8,19,9,21,10]))),bt=h.lazy(()=>Z(()=>import("./NotFound-DV7b0W2o.js"),__vite__mapDeps([29,1,2,3,4,5]))),jt=h.lazy(()=>Z(()=>import("./AuthPage-CG3JwWHa.js"),__vite__mapDeps([30,1,2,3,4,5,12,23,8,19,13,14,10]))),Nt=h.lazy(()=>Z(()=>import("./AuthCallback-CCfgaTEc.js"),__vite__mapDeps([31,1,2,3,4,5,8,10]))),Et=h.lazy(()=>Z(()=>import("./OnboardingPage-B4n-SApV.js"),__vite__mapDeps([32,1,2,3,4,5,12,23,8,13,9,14,10]))),kt=h.lazy(()=>Z(()=>import("./AnalyticsPage-BIYaEQmJ.js"),__vite__mapDeps([33,1,2,3,4,5,7,8,12,23,9,10])));(()=>{const e=(()=>{const e=[],t=[],s=["VITE_SUPABASE_URL","VITE_SUPABASE_ANON_KEY"];for(const r of s){const t=Ye[r];t?(t.includes("your_")||t.includes("_here"))&&e.push(`${r} appears to be a placeholder. Please set actual value.`):e.push(`Missing required environment variable: ${r}`)}return t.push("VITE_PAYSTACK_PUBLIC_KEY not set - payment features will be disabled"),{isValid:0===e.length,errors:e,warnings:t}})();e.isValid||e.errors.forEach(e=>{}),e.warnings.length>0&&e.warnings.forEach(e=>{}),e.isValid&&e.warnings.length})();const St=(()=>{const e=new X({defaultOptions:{queries:{staleTime:3e5,gcTime:18e5,retry:(e,t)=>401!==(null==t?void 0:t.status)&&403!==(null==t?void 0:t.status)&&(!((null==t?void 0:t.status)>=400&&(null==t?void 0:t.status)<500&&![408,429].includes(null==t?void 0:t.status))&&e<3),retryDelay:e=>Math.min(1e3*a(2,e),3e4),refetchOnWindowFocus:!1,refetchOnReconnect:!0,refetchOnMount:!0,throwOnError:!1,onError:ue},mutations:{retry:(e,t)=>!((null==t?void 0:t.status)>=400&&(null==t?void 0:t.status)<500)&&e<2,retryDelay:e=>Math.min(1e3*a(2,e),1e4),onError:ue}}});return(e=>{de.setQueryClient(e),e.setDefaultOptions({queries:{networkMode:"offlineFirst",retry:(e,t)=>!!navigator.onLine&&e<3,retryDelay:e=>Math.min(1e3*a(2,e),3e4),staleTime:3e5,gcTime:18e5},mutations:{networkMode:"offlineFirst",retry:3,onError:(e,t,s)=>{}}})})(e),e})(),Tt=U(Q);function Ot(){const{profile:e}=Ve();return(()=>{const e=k(),{profile:t}=Be();h.useEffect(()=>{t&&le.setUser({id:t.id,location:t.location,category:t.category,trustScore:t.trust_score})},[t]),h.useEffect(()=>{const t=`page_load_${e.pathname.replace(/\//g,"_")}`;oe.startMeasurement(t),le.trackPageView(e.pathname,document.title);const s=setTimeout(()=>{oe.endMeasurement(t)},100);return()=>{clearTimeout(s)}},[e.pathname])})(),h.useEffect(()=>{if("undefined"==typeof window)return;const e=new PerformanceObserver(e=>{var t;for(const s of e.getEntries()){const e=s;e.duration>5e3&&(le.trackPerformance("slow_api_call",e.duration),le.trackBusinessEvent("performance_issue",{issue_type:"slow_network",resource_name:e.name,duration:e.duration,connection_type:(null==(t=navigator.connection)?void 0:t.effectiveType)||"unknown"}))}});try{e.observe({entryTypes:["resource"]})}catch(t){}return()=>{e.disconnect()}},[]),h.useEffect(()=>{e&&(e.id,e.email,e.display_name,e.location,e.category,e.trust_score,he(St,e.id).catch(console.warn),fe(St).catch(console.warn))},[e]),f.jsx(h.Suspense,{fallback:f.jsx(Qe,{}),children:f.jsxs(Tt,{children:[f.jsx(J,{path:"/",element:f.jsx(It,{})}),f.jsx(J,{path:"/auth",element:f.jsx(jt,{})}),f.jsx(J,{path:"/auth/callback",element:f.jsx(Nt,{})}),f.jsx(J,{path:"/onboarding",element:f.jsx(Fe,{children:f.jsx(Et,{})})}),f.jsx(J,{path:"/dashboard",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(mt,{})})}),f.jsx(J,{path:"/discover",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(ht,{})})}),f.jsx(J,{path:"/discover/swipe",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(ft,{})})}),f.jsx(J,{path:"/trades",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(pt,{})})}),f.jsx(J,{path:"/trades/:id",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(xt,{})})}),f.jsx(J,{path:"/proposals",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(wt,{})})}),f.jsx(J,{path:"/wallet",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(_t,{})})}),f.jsx(J,{path:"/services",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(gt,{})})}),f.jsx(J,{path:"/profile",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(vt,{})})}),f.jsx(J,{path:"/settings",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(yt,{})})}),f.jsx(J,{path:"/analytics",element:f.jsx(Fe,{requireOnboarding:!0,children:f.jsx(kt,{})})}),f.jsx(J,{path:"*",element:f.jsx(bt,{})})]})})}function It(){const{isAuthenticated:e,isOnboarded:t}=Be(),s=G();return h.useEffect(()=>{e&&s(t?"/dashboard":"/onboarding",{replace:!0})},[e,t,s]),f.jsx(ut,{})}function Ct(){return h.useEffect(()=>{m(void 0,null,function*(){if("serviceWorker"in navigator)try{const e=yield navigator.serviceWorker.register("/sw.js",{scope:"/"});return e.addEventListener("updatefound",()=>{}),e}catch(e){}}).catch(console.error)},[]),f.jsx(ct,{children:f.jsx(F,{children:f.jsx(Y,{client:St,children:f.jsxs(ge,{children:[f.jsx(De,{}),f.jsx(Pe,{}),f.jsx(Ze,{}),f.jsx(Ot,{}),f.jsx(tt,{}),f.jsx(st,{}),f.jsx(lt,{}),!1]})})})})}K(document.getElementById("root")).render(f.jsx(Ct,{}));export{We as B,rt as C,Ue as S,nt as a,it as b,ot as c,Ke as d,Ee as e,at as f,pe as g,Ge as h,ze as s,Ne as t,Be as u};
