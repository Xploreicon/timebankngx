import{x as e,r as t,j as s,O as r}from"./react-vendor-CnY34O61.js";import{u as n,s as a}from"./index-CjTRKdPh.js";import"./vendor-CwuJVHC1.js";import"./backend-vendor-CggdsxVJ.js";import"./ui-vendor-CttiZxwU.js";import"./utils-vendor-BkyaMd0J.js";import"./query-vendor-vr-56lSy.js";function o(){const o=e();return n(),t.useEffect(()=>{const{data:{subscription:e}}=a.auth.onAuthStateChange((e,t)=>{return s=this,r=null,n=function*(){if("SIGNED_IN"===e&&t){const{data:e}=yield a.from("profiles").select("is_onboarded").eq("id",t.user.id).single();(null==e?void 0:e.is_onboarded)?o("/dashboard"):o("/onboarding")}else"SIGNED_OUT"===e&&o("/auth")},new Promise((e,t)=>{var a=e=>{try{i(n.next(e))}catch(s){t(s)}},o=e=>{try{i(n.throw(e))}catch(s){t(s)}},i=t=>t.done?e(t.value):Promise.resolve(t.value).then(a,o);i((n=n.apply(s,r)).next())});var s,r,n});return()=>e.unsubscribe()},[o]),s.jsx("div",{className:"min-h-screen flex items-center justify-center",children:s.jsxs("div",{className:"text-center",children:[s.jsx(r,{className:"h-8 w-8 animate-spin mx-auto mb-4"}),s.jsx("p",{className:"text-muted-foreground",children:"Completing authentication..."})]})})}export{o as default};
