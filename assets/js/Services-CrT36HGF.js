var e=(e,s,i)=>new Promise((t,a)=>{var r=e=>{try{d(i.next(e))}catch(s){a(s)}},l=e=>{try{d(i.throw(e))}catch(s){a(s)}},d=e=>e.done?t(e.value):Promise.resolve(e.value).then(r,l);d((i=i.apply(e,s)).next())});import{r as s,j as i,a9 as t,z as a}from"./react-vendor-CnY34O61.js";import{L as r}from"./Layout-BPnBhQSp.js";import{u as l,C as d,a as n,b as c,f as o,c as m,d as x,B as u,t as h}from"./index-BBu7AVS9.js";import{I as v}from"./input-DGNBd0ih.js";import{T as j,D as g,a as p,b as f,c as N,d as y,e as b}from"./textarea-Db-_GloC.js";import{S,a as C,b as w,c as k,d as P}from"./select-Cwmdi1fL.js";import{g as E,N as A}from"./categories-niEc3ryh.js";import{t as R}from"./timeCredits-C7U4qTHB.js";import"./vendor-CwuJVHC1.js";import"./backend-vendor-CggdsxVJ.js";import"./ui-vendor-CttiZxwU.js";import"./utils-vendor-BkyaMd0J.js";import"./query-vendor-DEKS82BJ.js";const q=A;function L(){const{services:A,fetchServices:L,addService:M,user:z,isLoading:V}=l(),[B,D]=s.useState(""),[F,I]=s.useState(""),[U,Y]=s.useState(""),[$,T]=s.useState(null),[O,W]=s.useState(null),[_,G]=s.useState(!1);s.useEffect(()=>{L()},[L]),s.useEffect(()=>{if(U){const e=R.calculateServicePotentialEarnings(U);T(e)}else T(null)},[U]);const H=s.useMemo(()=>A.filter(e=>e.user_id===(null==z?void 0:z.id)),[A,null==z?void 0:z.id]),J=E(),K=s=>e(this,null,function*(){try{h({title:s.availability?"Service Paused":"Service Activated",description:`"${s.title}" is now ${s.availability?"paused":"available"}`}),L()}catch(e){h({variant:"destructive",title:"Error",description:"Failed to update service availability"})}});return i.jsxs(r,{children:[i.jsxs("main",{className:"grid lg:grid-cols-2 gap-6",children:[i.jsxs(d,{children:[i.jsxs(n,{children:[i.jsx(c,{children:"Add New Service"}),i.jsx(o,{children:"Share your skills with the Nigerian business community"})]}),i.jsxs(m,{className:"space-y-4",children:[i.jsx("div",{children:i.jsx(v,{placeholder:"Service Title (e.g., 'Business Registration & CAC Documentation')",value:B,onChange:e=>D(e.target.value)})}),i.jsx("div",{children:i.jsx(j,{placeholder:"Describe your service and what makes you qualified...",value:F,onChange:e=>I(e.target.value),rows:3})}),i.jsx("div",{children:i.jsxs(S,{onValueChange:Y,value:U,children:[i.jsx(C,{children:i.jsx(w,{placeholder:"Select Category"})}),i.jsx(k,{children:i.jsxs("div",{className:"p-2",children:[i.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"Popular in Nigeria"}),J.map(e=>i.jsx(P,{value:e.id,className:"py-2",children:i.jsxs("div",{className:"flex items-center gap-2",children:[i.jsx("span",{children:e.icon}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium",children:e.name}),i.jsx("div",{className:"text-xs text-muted-foreground",children:e.description})]})]})},e.id)),i.jsxs("div",{className:"border-t pt-2 mt-2",children:[i.jsx("div",{className:"text-xs font-medium text-muted-foreground mb-2",children:"All Categories"}),q.filter(e=>!e.popular).map(e=>i.jsxs(P,{value:e.id,children:[e.icon," ",e.name]},e.id))]})]})})]})}),$&&i.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(t,{className:"w-4 h-4 text-green-600"}),i.jsx("span",{className:"text-sm font-medium text-green-800",children:"Earning Potential"})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4 text-xs",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-green-600",children:"Weekly Credits"}),i.jsx("div",{className:"font-bold text-green-800",children:$.weeklyCredits})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-green-600",children:"Monthly Credits"}),i.jsx("div",{className:"font-bold text-green-800",children:$.monthlyCredits})]})]}),i.jsxs("div",{className:"text-xs text-green-600 mt-2",children:["Rate: ",$.categoryRate," credits/hour (â‰ˆâ‚¦",(1e3*$.categoryRate).toLocaleString(),"/hour equivalent)"]})]}),i.jsx(x,{onClick:()=>e(this,null,function*(){if(!B||!U)return void h({variant:"destructive",title:"Missing Information",description:"Please fill in title and category"});const{error:e}=yield M({title:B,description:F,category:U});e?h({variant:"destructive",title:"Error",description:e}):(h({title:"Success",description:"Service added successfully!"}),D(""),I(""),Y(""))}),className:"w-full",disabled:V,children:V?"Adding Service...":"Add Service"})]})]}),i.jsxs(d,{children:[i.jsxs(n,{children:[i.jsx(c,{children:"My Services"}),i.jsxs(o,{children:["Manage your offerings (",H.length," services)"]})]}),i.jsx(m,{children:i.jsxs("div",{className:"space-y-4",children:[H.map(e=>{const s=q.find(s=>s.id===e.category||s.name===e.category),t=R.calculateServicePotentialEarnings(e.category||"professional");return i.jsxs("div",{className:"p-4 rounded-lg border bg-card",children:[i.jsxs("div",{className:"flex items-start justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-2xl",children:(null==s?void 0:s.icon)||"ðŸ’¼"}),i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium",children:e.title}),i.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2",children:e.description||"Professional service"})]})]}),i.jsx(u,{variant:e.availability?"default":"secondary",children:e.availability?"Available":"Paused"})]}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Category"}),i.jsx("div",{className:"font-medium",children:(null==s?void 0:s.name)||e.category})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Rate"}),i.jsxs("div",{className:"font-medium",children:[t.categoryRate," credits/hr"]})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-muted-foreground",children:"Equivalent"}),i.jsxs("div",{className:"font-medium",children:["â‚¦",(1e3*t.categoryRate).toLocaleString(),"/hr"]})]})]}),i.jsxs("div",{className:"flex gap-2 mt-3 pt-3 border-t",children:[i.jsx(x,{size:"sm",variant:"outline",onClick:()=>(W(e),void G(!0)),children:"Edit"}),i.jsx(x,{size:"sm",variant:"outline",onClick:()=>K(e),children:e.availability?"Pause":"Activate"}),i.jsx(x,{size:"sm",variant:"ghost",className:"text-muted-foreground",onClick:()=>{h({title:"Service Statistics",description:`Stats for "${e.title}" - Feature coming soon!`})},children:"Stats"})]})]},e.id)}),0===H.length&&i.jsxs("div",{className:"text-center p-8 text-muted-foreground border border-dashed rounded-lg",children:[i.jsx("div",{className:"text-4xl mb-4",children:"ðŸš€"}),i.jsx("h4",{className:"font-medium mb-2",children:"No services yet"}),i.jsx("p",{className:"text-sm",children:"Add your first service to start trading time instead of money!"})]}),H.length>0&&i.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:[i.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[i.jsx(a,{className:"w-4 h-4 text-blue-600"}),i.jsx("span",{className:"text-sm font-medium text-blue-800",children:"Your Business Impact"})]}),i.jsx("div",{className:"text-xs text-blue-700",children:"You're helping build Nigeria's time-banking economy! Your services can save other businesses thousands of naira in cash expenses."})]})]})})]})]}),i.jsx(g,{open:_,onOpenChange:G,children:i.jsxs(p,{children:[i.jsxs(f,{children:[i.jsx(N,{children:"Edit Service"}),i.jsx(y,{children:"Update your service details below."})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{children:i.jsx(v,{placeholder:"Service title",defaultValue:null==O?void 0:O.title})}),i.jsx("div",{children:i.jsx(j,{placeholder:"Service description",defaultValue:null==O?void 0:O.description,rows:3})}),i.jsx("div",{children:i.jsxs(S,{defaultValue:null==O?void 0:O.category,children:[i.jsx(C,{children:i.jsx(w,{placeholder:"Select category"})}),i.jsx(k,{children:q.map(e=>i.jsxs(P,{value:e.id,children:[e.icon," ",e.name]},e.id))})]})})]}),i.jsxs(b,{children:[i.jsx(x,{variant:"outline",onClick:()=>G(!1),children:"Cancel"}),i.jsx(x,{onClick:()=>{h({title:"Service Updated",description:"Feature coming soon - full edit functionality will be available after backend integration"}),G(!1)},children:"Update Service"})]})]})})]})}export{L as default};
