var e=Object.defineProperty,s=Object.defineProperties,t=Object.getOwnPropertyDescriptors,r=Object.getOwnPropertySymbols,a=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable,l=(s,t,r)=>t in s?e(s,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):s[t]=r,n=(e,s)=>{for(var t in s||(s={}))a.call(s,t)&&l(e,t,s[t]);if(r)for(var t of r(s))i.call(s,t)&&l(e,t,s[t]);return e},d=(e,r)=>s(e,t(r)),c=(e,s)=>{var t={};for(var l in e)a.call(e,l)&&s.indexOf(l)<0&&(t[l]=e[l]);if(null!=e&&r)for(var l of r(e))s.indexOf(l)<0&&i.call(e,l)&&(t[l]=e[l]);return t},o=(e,s,t)=>new Promise((r,a)=>{var i=e=>{try{n(t.next(e))}catch(s){a(s)}},l=e=>{try{n(t.throw(e))}catch(s){a(s)}},n=e=>e.done?r(e.value):Promise.resolve(e.value).then(i,l);n((t=t.apply(e,s)).next())});import{j as m,K as u,F as x,k as h,am as p,an as f,r as j,ao as g,ap as v,aq as N,ar as y,a8 as w,as as b,at as _,au as k,av as S,aw as C,ax as I,ay as T,az as R,aA as P,aB as D,p as A,aC as O,aD as q,aE as F,aF as $,aG as E,aH as U,X as W,aI as L,aJ as z,aK as M,J as Y,_ as H,aL as B}from"./react-vendor-CnY34O61.js";import{b as K,d as G,c as J,L as Q}from"./Layout-r0cnXxiB.js";import{C as V,c as X,B as Z,a as ee,b as se,d as te,t as re,s as ae,g as ie,h as le,u as ne}from"./index-CjTRKdPh.js";import{f as de}from"./utils-vendor-BkyaMd0J.js";import{T as ce,D as oe,a as me,b as ue,c as xe,d as he}from"./textarea-C8We33Ur.js";import{P as pe}from"./progress-DkfyDUd2.js";import{I as fe}from"./input-BR9g4TVH.js";import{L as je}from"./label-BEqXDCcJ.js";import{T as ge,a as ve,b as Ne,c as ye}from"./tabs-XccOGY67.js";import"./vendor-CwuJVHC1.js";import"./backend-vendor-CggdsxVJ.js";import"./ui-vendor-CttiZxwU.js";import"./query-vendor-vr-56lSy.js";const we=e=>{switch(e){case"completed":return"bg-green-500";case"active":return"bg-blue-500";case"accepted":return"bg-indigo-500";case"negotiating":return"bg-yellow-500";case"pending":return"bg-gray-400";case"disputed":return"bg-red-500";case"cancelled":return"bg-gray-500";default:return"bg-gray-300"}};function be({currentStatus:e,createdAt:s,acceptedAt:t,startedAt:r,completedAt:a,cancelledAt:i}){const l=[{status:"pending",label:"Proposed",description:"Trade proposal created",icon:h,timestamp:s},{status:"accepted",label:"Accepted",description:"Terms agreed by both parties",icon:p,timestamp:t},{status:"active",label:"In Progress",description:"Work has started",icon:f,timestamp:r},{status:"completed",label:"Completed",description:"Trade successfully finished",icon:p,timestamp:a}];if("cancelled"===e)return m.jsx(V,{children:m.jsx(X,{className:"py-6",children:m.jsxs("div",{className:"flex items-center gap-3 text-muted-foreground",children:[m.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-gray-100",children:m.jsx(u,{className:"h-5 w-5 text-gray-600"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-foreground",children:"Trade Cancelled"}),m.jsx("p",{className:"text-sm",children:i?de(new Date(i),{addSuffix:!0}):"Cancelled"})]})]})})});if("disputed"===e)return m.jsx(V,{children:m.jsx(X,{className:"py-6",children:m.jsxs("div",{className:"flex items-center gap-3 text-destructive",children:[m.jsx("div",{className:"flex items-center justify-center w-10 h-10 rounded-full bg-red-50",children:m.jsx(x,{className:"h-5 w-5"})}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium",children:"Trade Disputed"}),m.jsx("p",{className:"text-sm",children:"Under review by TimeBank team"})]})]})})});const n=["pending","accepted","active","completed"].indexOf(e);return m.jsx(V,{children:m.jsx(X,{className:"py-6",children:m.jsx("div",{className:"space-y-4",children:l.map((s,t)=>{const r=t<n,a=t===n,i=s.icon;return m.jsxs("div",{className:"relative flex items-start gap-3",children:[t<l.length-1&&m.jsx("div",{className:"absolute left-5 top-10 w-0.5 h-full -ml-px "+(r?"bg-primary":"bg-gray-200")}),m.jsx("div",{className:"relative flex items-center justify-center w-10 h-10 rounded-full "+(a?we(e)+" text-white ring-4 ring-primary/20":r?"bg-primary text-primary-foreground":"bg-gray-100 text-gray-400"),children:m.jsx(i,{className:"h-5 w-5"})}),m.jsxs("div",{className:"flex-1 pt-1",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("h4",{className:"font-medium "+(a||r?"text-foreground":"text-muted-foreground"),children:s.label}),a&&m.jsx(Z,{variant:"secondary",className:"text-xs",children:"Current"})]}),m.jsx("p",{className:"text-sm text-muted-foreground",children:s.description}),s.timestamp&&(r||a)&&m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:de(new Date(s.timestamp),{addSuffix:!0})})]})]},s.status)})})})})}function _e({tradeId:e,userId:s,onLogCreated:t}){const[r,a]=j.useState(!1),[i,l]=j.useState(!1),[n,d]=j.useState(0),[c,u]=j.useState(""),[x,h]=j.useState(""),[p,w]=j.useState(0),[b,_]=j.useState([]),[k,S]=j.useState([]),[C,I]=j.useState(!1),T=j.useRef(null),R=j.useRef(null),P=j.useRef(0);j.useEffect(()=>(r&&!i?R.current=setInterval(()=>{d(e=>e+1)},1e3):R.current&&(clearInterval(R.current),R.current=null),()=>{R.current&&clearInterval(R.current)}),[r,i]);const D=(s,t)=>o(this,null,function*(){const r=[];for(const a of s){const s=`${e}/${Date.now()}_${a.name}`,{data:i,error:l}=yield ae.storage.from(t).upload(s,a);if(l)throw l;const{data:n}=ae.storage.from(t).getPublicUrl(s);r.push(n.publicUrl)}return r});return m.jsxs(V,{children:[m.jsx(ee,{children:m.jsxs(se,{className:"flex items-center gap-2",children:[m.jsx(f,{className:"h-5 w-5"}),"Time Logger"]})}),m.jsxs(X,{className:"space-y-4",children:[m.jsx("div",{className:"flex items-center justify-center",children:m.jsx("div",{className:"text-4xl font-mono font-bold text-primary",children:(e=>{const s=Math.floor(e/3600),t=Math.floor(e%3600/60),r=e%60;return`${s.toString().padStart(2,"0")}:${t.toString().padStart(2,"0")}:${r.toString().padStart(2,"0")}`})(n)})}),m.jsx("div",{className:"flex justify-center",children:r&&m.jsx(Z,{variant:i?"secondary":"default",children:i?"Paused":"In Progress"})}),m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",children:"What are you working on?"}),m.jsx(ce,{placeholder:"Describe the work you're doing...",value:c,onChange:e=>u(e.target.value),disabled:r,rows:3})]}),r&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx("label",{className:"text-sm font-medium",children:"Progress Notes (Optional)"}),m.jsx(ce,{placeholder:"Any updates or challenges encountered...",value:x,onChange:e=>h(e.target.value),rows:2})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("label",{className:"text-sm font-medium",children:"Completion Progress"}),m.jsxs("span",{className:"text-sm font-medium text-primary",children:[p,"%"]})]}),m.jsx(pe,{value:p,className:"h-2"}),m.jsx("input",{type:"range",min:"0",max:"100",step:"5",value:p,onChange:e=>w(Number(e.target.value)),className:"w-full"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"deliverables",className:"text-sm font-medium cursor-pointer",children:m.jsxs("div",{className:"flex items-center gap-2 p-3 border-2 border-dashed rounded-lg hover:border-primary transition-colors",children:[m.jsx(g,{className:"h-4 w-4"}),m.jsx("span",{className:"text-xs",children:"Upload Deliverables"})]})}),m.jsx("input",{id:"deliverables",type:"file",multiple:!0,className:"hidden",onChange:e=>_(Array.from(e.target.files||[]))}),b.length>0&&m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[b.length," file(s) selected"]})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"screenshots",className:"text-sm font-medium cursor-pointer",children:m.jsxs("div",{className:"flex items-center gap-2 p-3 border-2 border-dashed rounded-lg hover:border-primary transition-colors",children:[m.jsx(v,{className:"h-4 w-4"}),m.jsx("span",{className:"text-xs",children:"Add Screenshots"})]})}),m.jsx("input",{id:"screenshots",type:"file",multiple:!0,accept:"image/*",className:"hidden",onChange:e=>S(Array.from(e.target.files||[]))}),k.length>0&&m.jsxs("p",{className:"text-xs text-muted-foreground mt-1",children:[k.length," image(s) selected"]})]})]})]}),m.jsx("div",{className:"flex gap-2",children:r?m.jsxs(m.Fragment,{children:[i?m.jsxs(te,{onClick:()=>{l(!1)},className:"flex-1",children:[m.jsx(f,{className:"h-4 w-4 mr-2"}),"Resume"]}):m.jsxs(te,{onClick:()=>{l(!0),P.current=n},variant:"secondary",className:"flex-1",children:[m.jsx(N,{className:"h-4 w-4 mr-2"}),"Pause"]}),m.jsxs(te,{onClick:()=>o(this,null,function*(){if(T.current){I(!0);try{const r=new Date,i=Math.floor(n/60);let o=[],m=[];b.length>0&&(o=yield D(b,"trade-attachments")),k.length>0&&(m=yield D(k,"trade-attachments"));const{error:f}=yield ae.from("time_logs").insert({trade_id:e,user_id:s,started_at:T.current.toISOString(),ended_at:r.toISOString(),duration_minutes:i,work_description:c,progress_notes:x||null,completion_percentage:p,deliverable_urls:o.length>0?o:null,screenshot_urls:m.length>0?m:null});if(f)throw f;re({title:"Time Log Saved",description:`Logged ${i} minutes of work`}),a(!1),l(!1),d(0),u(""),h(""),w(0),_([]),S([]),T.current=null,P.current=0,t&&t()}catch(r){re({variant:"destructive",title:"Error",description:"Failed to save time log"})}finally{I(!1)}}}),variant:"destructive",className:"flex-1",disabled:C,children:[m.jsx(y,{className:"h-4 w-4 mr-2"}),C?"Saving...":"Stop & Save"]})]}):m.jsxs(te,{onClick:()=>{c.trim()?(T.current=new Date,a(!0),l(!1),d(0),P.current=0):re({variant:"destructive",title:"Work Description Required",description:"Please describe what you'll be working on"})},className:"flex-1",children:[m.jsx(f,{className:"h-4 w-4 mr-2"}),"Start Timer"]})}),m.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Track your work time accurately to build trust and ensure fair credit exchange"})]})]})}function ke({tradeId:e,currentUserId:s,canApprove:t=!1}){const[r,a]=j.useState([]),[i,l]=j.useState(!0),[n,d]=j.useState(null);j.useEffect(()=>{c()},[e]);const c=()=>o(this,null,function*(){l(!0);try{const{data:s,error:t}=yield ae.from("time_logs").select("\n          *,\n          profiles:user_id (\n            display_name,\n            avatar_url\n          )\n        ").eq("trade_id",e).order("created_at",{ascending:!1});if(t)throw t;a(s||[])}catch(s){}finally{l(!1)}}),p=(e,t)=>o(this,null,function*(){try{const{error:r}=yield ae.from("time_logs").update({is_approved:t,approved_by:s,approved_at:(new Date).toISOString(),rejection_reason:t?null:"Not approved"}).eq("id",e);if(r)throw r;c()}catch(r){}});if(i)return m.jsxs(V,{children:[m.jsx(ee,{children:m.jsx(se,{children:"Work History"})}),m.jsx(X,{children:m.jsx("p",{className:"text-sm text-muted-foreground",children:"Loading..."})})]});if(0===r.length)return m.jsxs(V,{children:[m.jsx(ee,{children:m.jsx(se,{children:"Work History"})}),m.jsx(X,{children:m.jsx("p",{className:"text-sm text-muted-foreground",children:"No work has been logged yet"})})]});const f=r.filter(e=>!1!==e.is_approved).reduce((e,s)=>e+(s.duration_minutes||0),0);return m.jsxs(m.Fragment,{children:[m.jsxs(V,{children:[m.jsx(ee,{children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx(se,{children:"Work History"}),m.jsxs(Z,{variant:"secondary",children:[Math.floor(f/60),"h ",f%60,"m total"]})]})}),m.jsx(X,{className:"space-y-3",children:r.map(e=>{var r,a,i;const l=e.user_id===s,n=t&&!l&&null===e.is_approved;return m.jsxs("div",{className:"border rounded-lg p-4 space-y-3 hover:bg-muted/50 transition-colors cursor-pointer",onClick:()=>d(e),children:[m.jsxs("div",{className:"flex items-start justify-between",children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx(K,{className:"h-8 w-8",children:m.jsx(G,{children:(null==(a=null==(r=e.profiles)?void 0:r.display_name)?void 0:a.charAt(0))||"U"})}),m.jsxs("div",{children:[m.jsxs("p",{className:"font-medium text-sm",children:[(null==(i=e.profiles)?void 0:i.display_name)||"Unknown User",l&&m.jsx("span",{className:"text-muted-foreground ml-2",children:"(You)"})]}),m.jsx("p",{className:"text-xs text-muted-foreground",children:de(new Date(e.created_at),{addSuffix:!0})})]})]}),!0===e.is_approved&&m.jsxs(Z,{variant:"default",className:"bg-green-500",children:[m.jsx(w,{className:"h-3 w-3 mr-1"}),"Approved"]}),!1===e.is_approved&&m.jsxs(Z,{variant:"destructive",children:[m.jsx(u,{className:"h-3 w-3 mr-1"}),"Rejected"]}),null===e.is_approved&&n&&m.jsxs(Z,{variant:"secondary",children:[m.jsx(x,{className:"h-3 w-3 mr-1"}),"Pending"]})]}),m.jsx("p",{className:"text-sm",children:e.work_description}),m.jsxs("div",{className:"flex items-center gap-4 text-xs text-muted-foreground",children:[m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx(h,{className:"h-3 w-3"}),m.jsx("span",{children:e.duration_minutes?`${Math.floor(e.duration_minutes/60)}h ${e.duration_minutes%60}m`:"In progress"})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[m.jsx("span",{children:"Progress:"}),m.jsx(pe,{value:e.completion_percentage,className:"h-1 w-16"}),m.jsxs("span",{children:[e.completion_percentage,"%"]})]})]}),(e.deliverable_urls&&e.deliverable_urls.length>0||e.screenshot_urls&&e.screenshot_urls.length>0)&&m.jsxs("div",{className:"flex items-center gap-2 text-xs",children:[e.deliverable_urls&&e.deliverable_urls.length>0&&m.jsxs(Z,{variant:"outline",className:"text-xs",children:[m.jsx(b,{className:"h-3 w-3 mr-1"}),e.deliverable_urls.length," file(s)"]}),e.screenshot_urls&&e.screenshot_urls.length>0&&m.jsxs(Z,{variant:"outline",className:"text-xs",children:[m.jsx(v,{className:"h-3 w-3 mr-1"}),e.screenshot_urls.length," image(s)"]})]}),n&&m.jsxs("div",{className:"flex gap-2 pt-2 border-t",children:[m.jsx(te,{size:"sm",onClick:s=>{s.stopPropagation(),p(e.id,!0)},children:"Approve"}),m.jsx(te,{size:"sm",variant:"outline",onClick:s=>{s.stopPropagation(),p(e.id,!1)},children:"Reject"})]})]},e.id)})})]}),m.jsx(oe,{open:!!n,onOpenChange:()=>d(null),children:m.jsxs(me,{className:"max-w-2xl max-h-[80vh] overflow-y-auto",children:[m.jsxs(ue,{children:[m.jsx(xe,{children:"Work Session Details"}),m.jsx(he,{children:n&&de(new Date(n.created_at),{addSuffix:!0})})]}),n&&m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Work Description"}),m.jsx("p",{className:"text-sm",children:n.work_description})]}),n.progress_notes&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Progress Notes"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:n.progress_notes})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Duration"}),m.jsx("p",{className:"text-sm",children:n.duration_minutes?`${Math.floor(n.duration_minutes/60)}h ${n.duration_minutes%60}m`:"In progress"})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Completion"}),m.jsxs("p",{className:"text-sm",children:[n.completion_percentage,"%"]})]})]}),n.deliverable_urls&&n.deliverable_urls.length>0&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Deliverables"}),m.jsx("div",{className:"space-y-2",children:n.deliverable_urls.map((e,s)=>m.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm text-primary hover:underline",children:[m.jsx(b,{className:"h-4 w-4"}),"Deliverable ",s+1]},s))})]}),n.screenshot_urls&&n.screenshot_urls.length>0&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium mb-2",children:"Screenshots"}),m.jsx("div",{className:"grid grid-cols-2 gap-2",children:n.screenshot_urls.map((e,s)=>m.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"relative aspect-video rounded-lg overflow-hidden border hover:opacity-80 transition-opacity",children:m.jsx("img",{src:e,alt:`Screenshot ${s+1}`,className:"object-cover w-full h-full"})},s))})]})]})]})})]})}const Se=R,Ce=P,Ie=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsx(_,d(n({className:ie("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",r)},a),{ref:s}))});Ie.displayName=_.displayName;const Te=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsxs(Ce,{children:[m.jsx(Ie,{}),m.jsx(k,n({ref:s,className:ie("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",r)},a))]})});Te.displayName=k.displayName;const Re=e=>{var s=e,{className:t}=s,r=c(s,["className"]);return m.jsx("div",n({className:ie("flex flex-col space-y-2 text-center sm:text-left",t)},r))};Re.displayName="AlertDialogHeader";const Pe=e=>{var s=e,{className:t}=s,r=c(s,["className"]);return m.jsx("div",n({className:ie("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t)},r))};Pe.displayName="AlertDialogFooter";const De=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsx(S,n({ref:s,className:ie("text-lg font-semibold",r)},a))});De.displayName=S.displayName;const Ae=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsx(C,n({ref:s,className:ie("text-sm text-muted-foreground",r)},a))});Ae.displayName=C.displayName;const Oe=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsx(I,n({ref:s,className:ie(le(),r)},a))});Oe.displayName=I.displayName;const qe=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsx(T,n({ref:s,className:ie(le({variant:"outline"}),"mt-2 sm:mt-0",r)},a))});function Fe({trade:e,currentUserId:s,onStatusUpdate:t,onRequestRating:r}){const[a,i]=j.useState(!1),[l,d]=j.useState(!1),[c,x]=j.useState("accept"),h=e.proposer_id===s,p=e.provider_id===s,f=h?e.provider_completion_confirmed:e.proposer_completion_confirmed,g=h?e.proposer_completion_confirmed:e.provider_completion_confirmed,v=(s,...a)=>o(this,[s,...a],function*(s,a={}){i(!0);try{const{error:i}=yield ae.from("trades").update(n({status:s},a)).eq("id",e.id);if(i)throw i;re({title:"Trade Updated",description:`Trade status changed to ${s}`}),t(),"completed"===s&&r&&setTimeout(()=>{r()},1e3)}catch(l){re({variant:"destructive",title:"Error",description:"Failed to update trade status"})}finally{i(!1),d(!1)}}),N=()=>o(this,null,function*(){yield v("accepted",{accepted_at:(new Date).toISOString()})}),y=()=>o(this,null,function*(){yield v("active",{started_at:(new Date).toISOString()})}),b=()=>o(this,null,function*(){const s=h?"proposer_completion_confirmed":"provider_completion_confirmed";if(f)yield v("completed",{[s]:!0,completed_at:(new Date).toISOString()});else{const{error:r}=yield ae.from("trades").update({[s]:!0}).eq("id",e.id);if(r)return void re({variant:"destructive",title:"Error",description:"Failed to confirm completion"});re({title:"Confirmation Recorded",description:"Waiting for the other party to confirm completion"}),t()}}),_=()=>o(this,null,function*(){yield v("cancelled",{cancelled_at:(new Date).toISOString()})}),k=()=>o(this,null,function*(){yield v("disputed"),re({title:"Dispute Raised",description:"Our team will review this trade. You will be contacted shortly."})}),S=e=>{x(e),d(!0)},C=(()=>{switch(c){case"accept":return{title:"Accept Trade Proposal",description:"Are you ready to accept this trade? Credits will be held in escrow until completion."};case"start":return{title:"Start Trade Work",description:"Mark this trade as active and begin working?"};case"complete":return{title:"Confirm Completion",description:f?"Both parties will confirm completion. The trade will be marked as complete and credits will be released.":"Confirm that you have completed your part of the trade? The other party must also confirm before credits are released."};case"cancel":return{title:"Cancel Trade",description:"Are you sure you want to cancel this trade? This action cannot be undone."};case"dispute":return{title:"Raise Dispute",description:"Report an issue with this trade? Our team will review and mediate."};default:return{title:"",description:""}}})();return m.jsxs(m.Fragment,{children:[m.jsxs(V,{children:[m.jsx(ee,{children:m.jsx(se,{children:"Trade Actions"})}),m.jsxs(X,{className:"space-y-3",children:["pending"===e.status&&p&&m.jsxs(te,{onClick:()=>S("accept"),className:"w-full",disabled:a,children:[m.jsx(w,{className:"h-4 w-4 mr-2"}),"Accept Trade"]}),"accepted"===e.status&&m.jsxs(te,{onClick:()=>S("start"),className:"w-full",disabled:a,children:[m.jsx(D,{className:"h-4 w-4 mr-2"}),"Start Work"]}),"active"===e.status&&m.jsxs(m.Fragment,{children:[g?m.jsxs("div",{className:"p-3 bg-secondary rounded-lg text-center",children:[m.jsx("p",{className:"text-sm font-medium",children:"You've confirmed completion"}),m.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:f?"Processing completion...":"Waiting for other party to confirm"})]}):m.jsxs(te,{onClick:()=>S("complete"),className:"w-full",disabled:a,children:[m.jsx(w,{className:"h-4 w-4 mr-2"}),"Mark as Complete"]}),m.jsxs(te,{onClick:()=>S("dispute"),variant:"outline",className:"w-full",disabled:a,children:[m.jsx(A,{className:"h-4 w-4 mr-2"}),"Raise Dispute"]})]}),["pending","accepted","negotiating"].includes(e.status)&&m.jsxs(te,{onClick:()=>S("cancel"),variant:"destructive",className:"w-full",disabled:a,children:[m.jsx(u,{className:"h-4 w-4 mr-2"}),"Cancel Trade"]}),"completed"===e.status&&m.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg text-center",children:[m.jsx(w,{className:"h-8 w-8 mx-auto text-green-600 mb-2"}),m.jsx("p",{className:"font-medium text-green-900",children:"Trade Completed"}),m.jsx("p",{className:"text-sm text-green-700 mt-1",children:"Credits have been exchanged successfully"})]}),"disputed"===e.status&&m.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg text-center",children:[m.jsx(A,{className:"h-8 w-8 mx-auto text-yellow-600 mb-2"}),m.jsx("p",{className:"font-medium text-yellow-900",children:"Trade Under Review"}),m.jsx("p",{className:"text-sm text-yellow-700 mt-1",children:"Our team is investigating this issue"})]}),"cancelled"===e.status&&m.jsxs("div",{className:"p-4 bg-gray-50 border border-gray-200 rounded-lg text-center",children:[m.jsx(u,{className:"h-8 w-8 mx-auto text-gray-600 mb-2"}),m.jsx("p",{className:"font-medium text-gray-900",children:"Trade Cancelled"}),m.jsx("p",{className:"text-sm text-gray-700 mt-1",children:"This trade has been cancelled"})]})]})]}),m.jsx(Se,{open:l,onOpenChange:d,children:m.jsxs(Te,{children:[m.jsxs(Re,{children:[m.jsx(De,{children:C.title}),m.jsx(Ae,{children:C.description})]}),m.jsxs(Pe,{children:[m.jsx(qe,{disabled:a,children:"Cancel"}),m.jsx(Oe,{onClick:()=>{switch(c){case"accept":N();break;case"start":y();break;case"complete":b();break;case"cancel":_();break;case"dispute":k()}},disabled:a,children:a?"Processing...":"Confirm"})]})]})})]})}qe.displayName=T.displayName;const $e=j.forwardRef((e,s)=>{var t=e,{className:r,children:a}=t,i=c(t,["className","children"]);return m.jsxs(O,d(n({ref:s,className:ie("relative overflow-hidden",r)},i),{children:[m.jsx(q,{className:"h-full w-full rounded-[inherit]",children:a}),m.jsx(Ee,{}),m.jsx(F,{})]}))});$e.displayName=O.displayName;const Ee=j.forwardRef((e,s)=>{var t=e,{className:r,orientation:a="vertical"}=t,i=c(t,["className","orientation"]);return m.jsx($,d(n({ref:s,orientation:a,className:ie("flex touch-none select-none transition-colors","vertical"===a&&"h-full w-2.5 border-l border-l-transparent p-[1px]","horizontal"===a&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",r)},i),{children:m.jsx(E,{className:"relative flex-1 rounded-full bg-border"})}))});function Ue({tradeId:e,currentUserId:s,otherPartyId:t,otherPartyName:r="User",otherPartyAvatar:a}){const[i,l]=j.useState([]),[n,d]=j.useState(""),[c,u]=j.useState(!1),[x,h]=j.useState([]),[p,f]=j.useState(!0),g=j.useRef(null),N=j.useRef(null);j.useEffect(()=>{y(),w()},[e]),j.useEffect(()=>{const t=ae.channel(`trade_messages:${e}`).on("postgres_changes",{event:"INSERT",schema:"public",table:"trade_messages",filter:`trade_id=eq.${e}`},e=>o(this,null,function*(){const{data:t,error:r}=yield ae.from("trade_messages").select("\n              *,\n              sender:sender_id (\n                id,\n                display_name,\n                avatar_url\n              )\n            ").eq("id",e.new.id).single();!r&&t&&(l(e=>[...e,t]),t.sender_id!==s&&b(t.id))})).subscribe();return()=>{ae.removeChannel(t)}},[e,s]),j.useEffect(()=>{g.current&&(g.current.scrollTop=g.current.scrollHeight)},[i]);const y=()=>o(this,null,function*(){f(!0);try{const{data:s,error:t}=yield ae.from("trade_messages").select("\n          *,\n          sender:sender_id (\n            id,\n            display_name,\n            avatar_url\n          )\n        ").eq("trade_id",e).order("created_at",{ascending:!0});if(t)throw t;l(s||[])}catch(s){re({variant:"destructive",title:"Error",description:"Failed to load messages"})}finally{f(!1)}}),w=()=>o(this,null,function*(){try{yield ae.from("trade_messages").update({is_read:!0,read_at:(new Date).toISOString()}).eq("trade_id",e).eq("is_read",!1).neq("sender_id",s)}catch(t){}}),b=e=>o(this,null,function*(){try{yield ae.from("trade_messages").update({is_read:!0,read_at:(new Date).toISOString()}).eq("id",e)}catch(s){}}),_=s=>o(this,null,function*(){const t=[];for(const r of s){const s=`${e}/${Date.now()}_${r.name}`,{data:a,error:i}=yield ae.storage.from("trade-attachments").upload(s,r);if(i)throw i;const{data:l}=ae.storage.from("trade-attachments").getPublicUrl(s);t.push(l.publicUrl)}return t}),k=()=>o(this,null,function*(){if(n.trim()||0!==x.length){u(!0);try{let t=[];x.length>0&&(t=yield _(x));const r=t.some(e=>/\.(jpg|jpeg|png|gif|webp)$/i.test(e))?"image":t.length>0?"file":"text",{error:a}=yield ae.from("trade_messages").insert({trade_id:e,sender_id:s,message_text:n.trim()||"(Attachment)",message_type:r,attachment_urls:t.length>0?t:null,is_system_message:!1});if(a)throw a;d(""),h([])}catch(t){re({variant:"destructive",title:"Error",description:"Failed to send message"})}finally{u(!1)}}});return p?m.jsx("div",{className:"flex items-center justify-center h-96",children:m.jsx("p",{className:"text-muted-foreground",children:"Loading messages..."})}):m.jsxs("div",{className:"flex flex-col h-[600px]",children:[m.jsx($e,{ref:g,className:"flex-1 p-4",children:m.jsx("div",{className:"space-y-4",children:0===i.length?m.jsx("div",{className:"text-center py-8",children:m.jsx("p",{className:"text-muted-foreground",children:"No messages yet. Start the conversation!"})}):i.map(e=>{var t,i,l;const n=e.sender_id===s;return e.is_system_message?m.jsx("div",{className:"flex justify-center",children:m.jsx(Z,{variant:"secondary",className:"text-xs",children:e.message_text})},e.id):m.jsxs("div",{className:"flex items-start gap-3 "+(n?"justify-end":""),children:[!n&&m.jsxs(K,{className:"h-8 w-8",children:[m.jsx(J,{src:(null==(t=e.sender)?void 0:t.avatar_url)||a||""}),m.jsx(G,{children:(null==(l=null==(i=e.sender)?void 0:i.display_name)?void 0:l.charAt(0))||r.charAt(0)})]}),m.jsxs("div",{className:"flex-1 max-w-[70%] "+(n?"ml-auto":""),children:[m.jsxs("div",{className:"rounded-lg p-3 "+(n?"bg-primary text-primary-foreground":"bg-secondary text-secondary-foreground"),children:[m.jsx("p",{className:"text-sm whitespace-pre-wrap",children:e.message_text}),e.attachment_urls&&e.attachment_urls.length>0&&m.jsx("div",{className:"mt-2 space-y-2",children:e.attachment_urls.map((e,s)=>/\.(jpg|jpeg|png|gif|webp)$/i.test(e)?m.jsx("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"block",children:m.jsx("img",{src:e,alt:`Attachment ${s+1}`,className:"rounded max-w-full h-auto"})},s):m.jsxs("a",{href:e,target:"_blank",rel:"noopener noreferrer",className:"flex items-center gap-2 text-sm underline",children:[m.jsx(U,{className:"h-3 w-3"}),"Attachment ",s+1]},s))})]}),m.jsxs("p",{className:"text-xs text-muted-foreground mt-1 "+(n?"text-right":""),children:[de(new Date(e.created_at),{addSuffix:!0}),n&&e.is_read&&m.jsx("span",{className:"ml-2",children:"✓✓"})]})]}),n&&m.jsx(K,{className:"h-8 w-8",children:m.jsx(G,{children:"You"})})]},e.id)})})}),x.length>0&&m.jsx("div",{className:"px-4 py-2 border-t bg-muted/30",children:m.jsx("div",{className:"flex flex-wrap gap-2",children:x.map((e,s)=>m.jsx("div",{className:"relative group",children:m.jsxs("div",{className:"flex items-center gap-2 px-3 py-2 bg-background border rounded-lg",children:[e.type.startsWith("image/")?m.jsx(v,{className:"h-4 w-4"}):m.jsx(U,{className:"h-4 w-4"}),m.jsx("span",{className:"text-xs max-w-[150px] truncate",children:e.name}),m.jsx(te,{size:"icon",variant:"ghost",className:"h-5 w-5 p-0",onClick:()=>(e=>{h(x.filter((s,t)=>t!==e))})(s),children:m.jsx(W,{className:"h-3 w-3"})})]})},s))})}),m.jsxs("div",{className:"p-4 border-t",children:[m.jsxs("div",{className:"flex gap-2",children:[m.jsx("input",{ref:N,type:"file",multiple:!0,className:"hidden",onChange:e=>{const s=Array.from(e.target.files||[]);s.length+x.length>5?re({variant:"destructive",title:"Too Many Files",description:"You can only attach up to 5 files per message"}):h([...x,...s])},accept:"image/*,.pdf,.doc,.docx,.txt"}),m.jsx(te,{size:"icon",variant:"ghost",onClick:()=>{var e;return null==(e=N.current)?void 0:e.click()},disabled:c,children:m.jsx(U,{className:"h-4 w-4"})}),m.jsx(fe,{placeholder:"Type your message...",value:n,onChange:e=>d(e.target.value),onKeyPress:e=>"Enter"===e.key&&!e.shiftKey&&k(),disabled:c,className:"flex-1"}),m.jsx(te,{onClick:k,disabled:c||!n.trim()&&0===x.length,children:m.jsx(L,{className:"h-4 w-4"})})]}),m.jsx("p",{className:"text-xs text-muted-foreground mt-2",children:"Press Enter to send • Shift+Enter for new line"})]})]})}Ee.displayName=$.displayName;const We=j.forwardRef((e,s)=>{var t=e,{className:r}=t,a=c(t,["className"]);return m.jsx(z,d(n({ref:s,className:ie("peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",r)},a),{children:m.jsx(M,{className:ie("flex items-center justify-center text-current"),children:m.jsx(p,{className:"h-4 w-4"})})}))});We.displayName=z.displayName;const Le=[{key:"communication",label:"Communication",description:"How well did they communicate throughout the trade?"},{key:"quality",label:"Quality",description:"What was the quality of work delivered?"},{key:"timeliness",label:"Timeliness",description:"Did they meet deadlines and deliver on time?"},{key:"professionalism",label:"Professionalism",description:"How professional was their conduct?"}];function ze({isOpen:e,onClose:s,tradeId:t,reviewerId:r,revieweeId:a,revieweeName:i,serviceId:l,onReviewSubmitted:n}){const[d,c]=j.useState(5),[u,x]=j.useState(5),[h,p]=j.useState(5),[f,g]=j.useState(5),[v,N]=j.useState(5),[y,w]=j.useState(""),[b,_]=j.useState(""),[k,S]=j.useState(!0),[C,I]=j.useState(""),[T,R]=j.useState(!1),P={communication:[u,x],quality:[h,p],timeliness:[f,g],professionalism:[v,N]},D=(e,s)=>m.jsx("div",{className:"flex gap-1",children:[1,2,3,4,5].map(t=>m.jsx("button",{type:"button",onClick:()=>((e,s)=>{if("overall"===e)c(s);else{const[,t]=P[e];t(s)}})(e,t),className:"focus:outline-none focus:ring-2 focus:ring-primary rounded",children:m.jsx(H,{className:"h-6 w-6 transition-colors "+(t<=s?"fill-yellow-400 text-yellow-400":"text-gray-300")})},t))});return m.jsx(oe,{open:e,onOpenChange:s,children:m.jsxs(me,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[m.jsxs(ue,{children:[m.jsxs(xe,{children:["Rate Your Experience with ",i]}),m.jsx(he,{children:"Your honest feedback helps build trust in the TimeBank community"})]}),m.jsxs("div",{className:"space-y-6 py-4",children:[m.jsxs("div",{className:"space-y-2",children:[m.jsx(je,{className:"text-base font-semibold",children:"Overall Rating"}),m.jsx("p",{className:"text-sm text-muted-foreground",children:"How would you rate your overall experience?"}),m.jsxs("div",{className:"flex items-center gap-3",children:[D("overall",d),m.jsxs("span",{className:"text-sm font-medium",children:[d,"/5"]})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h4",{className:"font-semibold",children:"Detailed Ratings"}),Le.map(e=>{const[s]=P[e.key];return m.jsx("div",{className:"space-y-2",children:m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsxs("div",{children:[m.jsx(je,{className:"font-medium",children:e.label}),m.jsx("p",{className:"text-xs text-muted-foreground",children:e.description})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[D(e.key,s),m.jsxs("span",{className:"text-sm w-8",children:[s,"/5"]})]})]})},e.key)})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(je,{htmlFor:"review-title",children:"Review Title *"}),m.jsx(fe,{id:"review-title",placeholder:"e.g., Great experience working together",value:y,onChange:e=>w(e.target.value),maxLength:100}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[y.length,"/100 characters"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(je,{htmlFor:"review-text",children:"Your Review *"}),m.jsx(ce,{id:"review-text",placeholder:"Share your experience in detail. What went well? What could be improved?",value:b,onChange:e=>_(e.target.value),rows:5,maxLength:1e3}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[b.length,"/1000 characters (minimum 10)"]})]}),m.jsxs("div",{className:"space-y-2",children:[m.jsx(je,{htmlFor:"work-location",children:"Work Location (Optional)"}),m.jsx(fe,{id:"work-location",placeholder:"e.g., Lagos, Nigeria",value:C,onChange:e=>I(e.target.value)}),m.jsx("p",{className:"text-xs text-muted-foreground",children:"Where was the work performed? (for physical services)"})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsx(We,{id:"would-recommend",checked:k,onCheckedChange:e=>S(e)}),m.jsxs("label",{htmlFor:"would-recommend",className:"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70 cursor-pointer flex items-center gap-2",children:[m.jsx(Y,{className:"h-4 w-4 text-primary"}),"I would recommend this trader to others"]})]})]}),m.jsxs("div",{className:"flex gap-3 pt-4 border-t",children:[m.jsx(te,{variant:"outline",onClick:s,disabled:T,className:"flex-1",children:"Cancel"}),m.jsx(te,{onClick:()=>o(this,null,function*(){if(y.trim())if(y.length<5||y.length>100)re({variant:"destructive",title:"Invalid Title",description:"Title must be between 5 and 100 characters"});else if(b.trim())if(b.length<10||b.length>1e3)re({variant:"destructive",title:"Invalid Review",description:"Review must be between 10 and 1000 characters"});else{R(!0);try{const{error:e}=yield ae.from("reviews").insert({trade_id:t,reviewer_id:r,reviewee_id:a,service_id:l||null,overall_rating:d,communication_rating:u,quality_rating:h,timeliness_rating:f,professionalism_rating:v,review_title:y.trim(),review_text:b.trim(),would_recommend:k,work_location:C.trim()||null,language_used:"english",is_verified:!1});if(e)throw e;re({title:"Review Submitted",description:"Thank you for your feedback!"});const i=((d+u+h+f+v)/5).toFixed(1);yield ae.rpc("update_user_trust_score",{user_id:a,new_rating:parseFloat(i)}).catch(console.error),s(),n&&n()}catch(e){re({variant:"destructive",title:"Error",description:"Failed to submit review. Please try again."})}finally{R(!1)}}else re({variant:"destructive",title:"Review Required",description:"Please write your review"});else re({variant:"destructive",title:"Title Required",description:"Please provide a title for your review"})}),disabled:T,className:"flex-1",children:T?"Submitting...":"Submit Review"})]}),m.jsx("p",{className:"text-xs text-muted-foreground text-center",children:"Reviews are public and help build trust in the TimeBank community"})]})})}function Me(){const{id:e}=B(),{trades:s,fetchTrades:t,profile:r}=ne(),[a,i]=j.useState("overview"),[l,n]=j.useState(!1);j.useEffect(()=>{t()},[t]);const d=j.useMemo(()=>s.find(s=>s.id===e),[s,e]);if(!d)return m.jsx(Q,{children:m.jsxs("div",{className:"p-6 text-center",children:[m.jsx("h2",{className:"text-xl font-semibold mb-2",children:"Trade not found"}),m.jsx("p",{className:"text-muted-foreground",children:"The trade you're looking for doesn't exist."})]})});const c=d.provider_id===(null==r?void 0:r.id),o=d.proposer_id===(null==r?void 0:r.id),u=c&&"active"===d.status||o&&"active"===d.status,x=o?d.provider_id:d.proposer_id,h=o?"Provider":"Proposer";return m.jsx(Q,{children:m.jsxs("div",{className:"max-w-7xl mx-auto space-y-6",children:[m.jsxs("div",{children:[m.jsx("h1",{className:"text-3xl font-bold",children:d.title}),m.jsx("p",{className:"text-muted-foreground mt-1",children:d.description})]}),m.jsxs("div",{className:"grid lg:grid-cols-[1fr_380px] gap-6",children:[m.jsx("div",{children:m.jsxs(ge,{value:a,onValueChange:i,children:[m.jsxs(ve,{className:"grid w-full grid-cols-3",children:[m.jsx(Ne,{value:"overview",children:"Overview"}),m.jsx(Ne,{value:"messages",children:"Messages"}),m.jsx(Ne,{value:"work",children:"Work Logs"})]}),m.jsxs(ye,{value:"overview",className:"space-y-6",children:[m.jsx(be,{currentStatus:d.status,createdAt:d.created_at,acceptedAt:d.accepted_at||void 0,startedAt:d.started_at||void 0,completedAt:d.completed_at||void 0,cancelledAt:d.cancelled_at||void 0}),m.jsxs(V,{children:[m.jsx(ee,{children:m.jsx(se,{children:"Trade Details"})}),m.jsxs(X,{className:"space-y-4",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"You Offer"}),m.jsxs("p",{className:"text-sm mt-1",children:[o?d.proposer_hours:d.provider_hours," hours"]}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[o?d.proposer_credits:d.provider_credits," credits"]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"You Receive"}),m.jsxs("p",{className:"text-sm mt-1",children:[o?d.provider_hours:d.proposer_hours," hours"]}),m.jsxs("p",{className:"text-xs text-muted-foreground",children:[o?d.provider_credits:d.proposer_credits," credits"]})]})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Exchange Rate"}),m.jsxs("p",{className:"text-sm mt-1",children:[d.exchange_rate.toFixed(2),"x"]})]}),d.delivery_deadline&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Deadline"}),m.jsx("p",{className:"text-sm mt-1",children:new Date(d.delivery_deadline).toLocaleDateString()})]}),d.terms_and_conditions&&m.jsxs("div",{children:[m.jsx("h4",{className:"font-medium text-sm text-muted-foreground",children:"Terms & Conditions"}),m.jsx("p",{className:"text-sm mt-1 text-muted-foreground",children:d.terms_and_conditions})]})]})]})]}),m.jsx(ye,{value:"messages",children:m.jsxs(V,{children:[m.jsx(ee,{children:m.jsx(se,{children:"Trade Communication"})}),m.jsx(X,{className:"p-0",children:r&&m.jsx(Ue,{tradeId:d.id,currentUserId:r.id,otherPartyId:o?d.provider_id:d.proposer_id,otherPartyName:o?"Provider":"Proposer"})})]})}),m.jsxs(ye,{value:"work",className:"space-y-6",children:["active"===d.status&&r&&m.jsx(_e,{tradeId:d.id,userId:r.id,onLogCreated:()=>t()}),m.jsx(ke,{tradeId:d.id,currentUserId:(null==r?void 0:r.id)||"",canApprove:u})]})]})}),m.jsxs("div",{className:"space-y-4",children:[r&&m.jsx(Fe,{trade:d,currentUserId:r.id,onStatusUpdate:t,onRequestRating:()=>n(!0)}),m.jsxs(V,{children:[m.jsx(ee,{children:m.jsx(se,{children:"Quick Info"})}),m.jsxs(X,{className:"space-y-3 text-sm",children:[m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Status:"}),m.jsx(Z,{variant:"secondary",className:"ml-2 capitalize",children:d.status})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Priority:"}),m.jsxs("span",{className:"ml-2",children:[d.priority_level||3,"/5"]})]}),d.requires_physical_meetup&&m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Location:"}),m.jsx("p",{className:"mt-1",children:d.meetup_location||"To be determined"})]}),m.jsxs("div",{children:[m.jsx("span",{className:"text-muted-foreground",children:"Preferred Contact:"}),m.jsx("span",{className:"ml-2 capitalize",children:d.preferred_communication_method||"WhatsApp"})]})]})]})]})]}),r&&l&&m.jsx(ze,{isOpen:l,onClose:()=>n(!1),tradeId:d.id,reviewerId:r.id,revieweeId:x,revieweeName:h,serviceId:o?d.provider_service_id||void 0:d.proposer_service_id||void 0,onReviewSubmitted:()=>{t(),n(!1)}})]})})}export{Me as default};
