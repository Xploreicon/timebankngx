var e=Object.defineProperty,a=Object.defineProperties,s=Object.getOwnPropertyDescriptors,t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,l=Object.prototype.propertyIsEnumerable,i=(a,s,t)=>s in a?e(a,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):a[s]=t,n=(e,a)=>{for(var s in a||(a={}))r.call(a,s)&&i(e,s,a[s]);if(t)for(var s of t(a))l.call(a,s)&&i(e,s,a[s]);return e},d=(e,t)=>a(e,s(t)),o=(e,a)=>{var s={};for(var i in e)r.call(e,i)&&a.indexOf(i)<0&&(s[i]=e[i]);if(null!=e&&t)for(var i of t(e))a.indexOf(i)<0&&l.call(e,i)&&(s[i]=e[i]);return s},c=(e,a,s)=>new Promise((t,r)=>{var l=e=>{try{n(s.next(e))}catch(a){r(a)}},i=e=>{try{n(s.throw(e))}catch(a){r(a)}},n=e=>e.done?t(e.value):Promise.resolve(e.value).then(l,i);n((s=s.apply(e,a)).next())});import{r as m,j as f,bm as p,bn as x,bo as u,bp as h,bq as N,br as b,bs as v,bt as j,bu as g,bv as y,bw as w,bx as k,by as R,am as O,bz as z,bA as C,bB as P,bC as S,aM as E,bD as _,aN as A,aO as D,aP as T,X as B,aQ as L,aR as M,aS as V,u as U,x as W,L as q,k as H,U as F,bE as G,bF as I,bG as Q,H as $,m as J,bH as K,M as X,B as Y}from"./react-vendor-CnY34O61.js";import{g as Z,u as ee,d as ae,s as se,t as te}from"./index-BBu7AVS9.js";import{a as re}from"./utils-vendor-BkyaMd0J.js";const le=m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(p,n({ref:a,className:Z("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",t)},r))});le.displayName=p.displayName;const ie=m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(x,n({ref:a,className:Z("aspect-square h-full w-full",t)},r))});ie.displayName=x.displayName;const ne=m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(u,n({ref:a,className:Z("flex h-full w-full items-center justify-center rounded-full bg-muted",t)},r))});ne.displayName=u.displayName;const de=h,oe=N;m.forwardRef((e,a)=>{var s=e,{className:t,inset:r,children:l}=s,i=o(s,["className","inset","children"]);return f.jsxs(b,d(n({ref:a,className:Z("flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent",r&&"pl-8",t)},i),{children:[l,f.jsx(v,{className:"ml-auto h-4 w-4"})]}))}).displayName=b.displayName;m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(j,n({ref:a,className:Z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},r))}).displayName=j.displayName;const ce=m.forwardRef((e,a)=>{var s=e,{className:t,sideOffset:r=4}=s,l=o(s,["className","sideOffset"]);return f.jsx(g,{children:f.jsx(y,n({ref:a,sideOffset:r,className:Z("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t)},l))})});ce.displayName=y.displayName;const me=m.forwardRef((e,a)=>{var s=e,{className:t,inset:r}=s,l=o(s,["className","inset"]);return f.jsx(w,n({ref:a,className:Z("relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",r&&"pl-8",t)},l))});me.displayName=w.displayName;m.forwardRef((e,a)=>{var s=e,{className:t,children:r,checked:l}=s,i=o(s,["className","children","checked"]);return f.jsxs(k,d(n({ref:a,className:Z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),checked:l},i),{children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(R,{children:f.jsx(O,{className:"h-4 w-4"})})}),r]}))}).displayName=k.displayName;m.forwardRef((e,a)=>{var s=e,{className:t,children:r}=s,l=o(s,["className","children"]);return f.jsxs(z,d(n({ref:a,className:Z("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t)},l),{children:[f.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:f.jsx(R,{children:f.jsx(C,{className:"h-2 w-2 fill-current"})})}),r]}))}).displayName=z.displayName;m.forwardRef((e,a)=>{var s=e,{className:t,inset:r}=s,l=o(s,["className","inset"]);return f.jsx(P,n({ref:a,className:Z("px-2 py-1.5 text-sm font-semibold",r&&"pl-8",t)},l))}).displayName=P.displayName;m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(S,n({ref:a,className:Z("-mx-1 my-1 h-px bg-muted",t)},r))}).displayName=S.displayName;const fe=E,pe=_,xe=V,ue=m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(A,d(n({className:Z("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t)},r),{ref:a}))});ue.displayName=A.displayName;const he=re("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),Ne=m.forwardRef((e,a)=>{var s=e,{side:t="right",className:r,children:l}=s,i=o(s,["side","className","children"]);return f.jsxs(xe,{children:[f.jsx(ue,{}),f.jsxs(D,d(n({ref:a,className:Z(he({side:t}),r)},i),{children:[l,f.jsxs(T,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[f.jsx(B,{className:"h-4 w-4"}),f.jsx("span",{className:"sr-only",children:"Close"})]})]}))]})});Ne.displayName=D.displayName;m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(L,n({ref:a,className:Z("text-lg font-semibold text-foreground",t)},r))}).displayName=L.displayName;m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx(M,n({ref:a,className:Z("text-sm text-muted-foreground",t)},r))}).displayName=M.displayName;const be=re("relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),ve=m.forwardRef((e,a)=>{var s=e,{className:t,variant:r}=s,l=o(s,["className","variant"]);return f.jsx("div",n({ref:a,role:"alert",className:Z(be({variant:r}),t)},l))});ve.displayName="Alert";const je=m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx("h5",n({ref:a,className:Z("mb-1 font-medium leading-none tracking-tight",t)},r))});je.displayName="AlertTitle";const ge=m.forwardRef((e,a)=>{var s=e,{className:t}=s,r=o(s,["className"]);return f.jsx("div",n({ref:a,className:Z("text-sm [&_p]:leading-relaxed",t)},r))});ge.displayName="AlertDescription";const ye=[{path:"/dashboard",label:"Dashboard",icon:$},{path:"/discover",label:"Discover",icon:J},{path:"/trades",label:"My Trades",icon:K},{path:"/proposals",label:"Proposals",icon:X},{path:"/wallet",label:"Wallet",icon:H},{path:"/services",label:"Services",icon:Y},{path:"/profile",label:"Profile",icon:F}];function we({children:e}){var a,s;const t=U(),r=W(),{profile:l,signOut:i,dismissedEmailReminder:n,dismissEmailReminder:d,resetEmailReminder:o}=ee(),[p,x]=m.useState(!1),[u,h]=m.useState(!1),N=()=>c(this,null,function*(){yield i(),r("/")}),b=!(!l||null!=(a=l.email_verified)&&a);m.useEffect(()=>{b||o()},[b,o]);const v=()=>c(this,null,function*(){if((null==l?void 0:l.email)&&!u)try{h(!0);const{error:e}=yield se.auth.resend({type:"signup",email:l.email,options:{emailRedirectTo:`${window.location.origin}/auth/callback`}});if(e)throw e;te({title:"Verification email sent",description:"Check your inbox and spam folder for the confirmation link."})}catch(e){te({variant:"destructive",title:"Unable to send email",description:e instanceof Error?e.message:"Please try again later."})}finally{h(!1)}}),j=e=>t.pathname===e,g=()=>f.jsx("nav",{className:"space-y-2",children:ye.map(e=>{const a=e.icon;return f.jsxs(q,{to:e.path,onClick:()=>x(!1),className:"flex items-center gap-3 px-3 py-2 rounded-lg transition-colors "+(j(e.path)?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[f.jsx(a,{className:"h-5 w-5"}),f.jsx("span",{className:"font-medium",children:e.label})]},e.path)})});return f.jsxs("div",{className:"min-h-screen bg-background",children:[f.jsxs("header",{className:"border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 sticky top-0 z-50",children:[f.jsxs("div",{className:"container mx-auto px-4 h-14 flex items-center justify-between",children:[f.jsxs(q,{to:"/dashboard",className:"flex items-center gap-2 font-brand text-xl",children:[f.jsx(H,{className:"h-6 w-6 text-primary"}),f.jsx("span",{children:"TimeBank"})]}),f.jsx("nav",{className:"hidden md:flex items-center gap-6",children:ye.map(e=>{const a=e.icon;return f.jsxs(q,{to:e.path,className:"flex items-center gap-2 px-3 py-2 rounded-lg text-sm font-medium transition-colors "+(j(e.path)?"bg-primary text-primary-foreground":"text-muted-foreground hover:bg-muted hover:text-foreground"),children:[f.jsx(a,{className:"h-4 w-4"}),e.label]},e.path)})}),f.jsxs("div",{className:"flex items-center gap-4",children:[f.jsxs("div",{className:"hidden sm:flex items-center gap-2 px-3 py-1 bg-secondary rounded-full",children:[f.jsx(H,{className:"h-4 w-4 text-primary"}),f.jsxs("span",{className:"text-sm font-medium",children:[(null==l?void 0:l.available_credits)||0," credits"]})]}),f.jsxs(de,{children:[f.jsx(oe,{asChild:!0,children:f.jsx(ae,{variant:"ghost",className:"relative h-8 w-8 rounded-full",children:f.jsxs(le,{className:"h-8 w-8",children:[f.jsx(ie,{src:null==l?void 0:l.avatar_url,alt:null==l?void 0:l.display_name}),f.jsx(ne,{children:(null==(s=null==l?void 0:l.display_name)?void 0:s.charAt(0))||"U"})]})})}),f.jsxs(ce,{className:"w-56",align:"end",forceMount:!0,children:[f.jsxs("div",{className:"flex flex-col space-y-1 p-2",children:[f.jsx("p",{className:"text-sm font-medium leading-none",children:null==l?void 0:l.display_name}),f.jsx("p",{className:"text-xs leading-none text-muted-foreground",children:null==l?void 0:l.email})]}),f.jsx(me,{asChild:!0,children:f.jsxs(q,{to:"/profile",children:[f.jsx(F,{className:"mr-2 h-4 w-4"}),"Profile"]})}),f.jsx(me,{asChild:!0,children:f.jsx(q,{to:"/settings",children:"Settings"})}),f.jsxs(me,{onClick:N,children:[f.jsx(G,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]}),f.jsxs(fe,{open:p,onOpenChange:x,children:[f.jsx(pe,{asChild:!0,children:f.jsx(ae,{variant:"ghost",size:"icon",className:"md:hidden",children:f.jsx(I,{className:"h-5 w-5"})})}),f.jsx(Ne,{side:"left",className:"w-72",children:f.jsxs("div",{className:"flex flex-col h-full",children:[f.jsxs("div",{className:"flex items-center gap-2 mb-6",children:[f.jsx(H,{className:"h-6 w-6 text-primary"}),f.jsx("span",{className:"font-brand text-xl",children:"TimeBank"})]}),f.jsx(g,{}),f.jsxs("div",{className:"mt-auto pt-6",children:[f.jsxs("div",{className:"flex items-center gap-2 p-3 bg-secondary rounded-lg mb-4",children:[f.jsx(H,{className:"h-4 w-4 text-primary"}),f.jsxs("span",{className:"text-sm font-medium",children:[(null==l?void 0:l.available_credits)||0," credits"]})]}),f.jsxs(ae,{variant:"outline",onClick:N,className:"w-full",children:[f.jsx(G,{className:"mr-2 h-4 w-4"}),"Log out"]})]})]})})]})]})]}),b&&!n&&f.jsx("div",{className:"border-t border-amber-200 bg-amber-50",children:f.jsx("div",{className:"container mx-auto px-4 py-3",children:f.jsx(ve,{className:"bg-transparent border-0 p-0",children:f.jsxs("div",{className:"flex flex-col gap-3 sm:flex-row sm:items-center sm:justify-between",children:[f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Q,{className:"h-5 w-5 text-amber-600 mt-0.5"}),f.jsxs("div",{children:[f.jsx(je,{className:"text-amber-900",children:"Verify your email"}),f.jsxs(ge,{className:"text-amber-800",children:["We sent a confirmation link to ",f.jsx("strong",{children:null==l?void 0:l.email}),". Please confirm to unlock every feature."]})]})]}),f.jsxs("div",{className:"flex gap-2 sm:shrink-0",children:[f.jsx(ae,{variant:"outline",size:"sm",onClick:()=>d(!0),children:"Remind me later"}),f.jsx(ae,{size:"sm",onClick:v,disabled:u,children:u?"Sending…":"Resend link"})]})]})})})})]}),f.jsxs("main",{className:"container mx-auto px-4 py-6 space-y-4",children:[b&&!n&&f.jsx(ve,{className:"border-amber-300 bg-amber-50",children:f.jsxs("div",{className:"flex items-start gap-3",children:[f.jsx(Q,{className:"mt-1 h-5 w-5 text-amber-600"}),f.jsxs("div",{className:"space-y-2",children:[f.jsx(je,{className:"text-amber-700",children:"Email verification pending"}),f.jsxs(ge,{className:"space-y-2",children:[f.jsxs("span",{children:["We still need you to confirm ",f.jsx("strong",{children:null==l?void 0:l.email}),". Some features may remain limited until you verify."]}),f.jsxs("div",{className:"flex flex-wrap gap-2",children:[f.jsx(ae,{variant:"outline",size:"sm",onClick:()=>d(!0),children:"Dismiss"}),f.jsx(ae,{size:"sm",onClick:v,disabled:u,children:u?"Sending…":"Resend verification email"})]})]})]})]})}),e]}),f.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 z-50 bg-background border-t",children:f.jsx("nav",{className:"flex items-center justify-around py-2",children:ye.map(e=>{const a=e.icon;return f.jsxs(q,{to:e.path,className:"flex flex-col items-center gap-1 px-3 py-2 "+(j(e.path)?"text-primary":"text-muted-foreground"),children:[f.jsx(a,{className:"h-5 w-5"}),f.jsx("span",{className:"text-xs",children:e.label})]},e.path)})})})]})}export{ve as A,we as L,ge as a,le as b,ie as c,ne as d};
